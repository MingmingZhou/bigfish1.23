<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">


    <!-- Shopping Wish List -->
    <screen name="eCommerceShowWishList">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="eCommerceShowWishList" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.WishListTitle}" />
                <set field="title" from-field="pageTitle" />

                <set field="formName" value="wishListform" />
                <set field="formAction" value="modifyWishList" />
                <set field="formSubmitJsMethod" value="updateWishlist()" />
                <set field="updateWishListAction" value="modifyWishList"/>
                <set field="deleteFromWishListAction" value="deleteFromWishList"/>
                <set field="addToCartFromWishListAction" value="addToCartFromWishList"/>
                <set field="prevButtonUrl" value="main" />
                <set field="prevButtonDescription" value="${uiLabelMap.ContinueShoppingBtn}"/>
                <set field="nextButtonDescription" value="${uiLabelMap.AddCheckedItemToCartBtn}"/>
                <set field="nextButtonUrl" value="javascript:submitCheckoutForm(document.${formName}, 'AMCW', '');"/>
                <set field="addMultiItemsToCartFromWishListAction" value="addMultiItemsToCartFromWishList" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/showWishListItems.groovy" />
                <set field="nextButtonVisible" value="${groovy:if(wishListSize > 0)return 'Y' else return 'N';}"/>
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="eCommerceShowWishList" style="eCommerceShowWishList">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCart.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_WISHLIST" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="showWishListDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_WISHLIST" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <!-- CART SCREENS -->
    <screen name="eCommerceShowcart">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="eCommerceShowcart" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="selectedStep" value="cart" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="showCartFootprint" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.ShoppingCartTitle}" />
                <set field="title" from-field="pageTitle" />
                <!-- For Page Tagging to be generated -->
                <set field="showCartPageTagging" value="Y" />
                <set field="shoppingCartSize" value="${groovy:org.ofbiz.order.shoppingcart.ShoppingCartEvents.getCartObject(request).size();}"/>
                <set field="formName" value="cartform" />
                <set field="formAction" value="${groovy:if(shoppingCartSize > 0)return 'checkout' else return 'main';}"/>
                <set field="formSubmitJsMethod" value="updateCart()" />
                <set field="submitButtonVisible" value="Y" />
                <set field="updateCartAction" value="modifycart"/>
                <set field="addPromoCodeRequest" value="validateShowCartPromoCode"/>
                <set field="removePromoCodeRequest" value="removeShowCartPromoCode"/>
                <set field="updateCartRecurrenceFlagRequest" value="modifyShowCartRecurrence"/>
                
                <set field="addLoyaltyPointsRequest" value="validateShowCartLoyaltyPoints"/>
                <set field="removeLoyaltyPointsRequest" value="removeShowCartLoyaltyPoints"/>
                <set field="updateLoyaltyPointsRequest" value="validateShowCartUpdateLoyaltyPoints"/>
                
                <set field="updateRecurrenceFreqRequest" value="updateShowCartRecurrenceFreq"/>
                
                <set field="prevButtonUrl" value="main" />
                <set field="prevButtonDescription" value="${uiLabelMap.ContinueShoppingBtn}"/>
                <set field="prevButtonClass" value="${groovy:if(shoppingCartSize > 0)return 'standardBtn negative' else return 'standardBtn positive';}"/>
                <set field="doneAction" value="${groovy:if(shoppingCartSize > 0)return 'checkout' else return 'main';}" />
                <set field="nextButtonVisible" value="${groovy:if(shoppingCartSize > 0)return 'Y' else return 'N';}"/>
                <set field="nextButtonUrl" value="javascript:submitCheckoutForm(document.cartform, 'VDN', '');"/>
                <set field="nextButtonDescription" value="${uiLabelMap.CheckoutBtn}"/>
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/showCartItems.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/cartSalesTaxInfo.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="eCommerceShowcart" style="eCommerceShowcart">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCart.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_SHOPPING_CART" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="showCartDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_SHOPPING_CART" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>


    <!-- START ANON SINGLE PAGE CHECKOUT -->
    <screen name="anonSinglePageCheckout">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="anonSinglePageCheckout" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="pageTitle" value="${uiLabelMap.SinglePageCheckoutTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="anonSinglePageCheckout" />
                <set field="formAction" value="anonSinglePageSubmitOrder" />
                <set field="isCheckoutPage" value="true" />
                
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="${groovy:if(parameters.isPaymentProcessError == 'Y')return '' else return 'Y';}" />
                <set field="updateShippingOptionRequest" value="anonSinglePageUpdateShippingOption" />
                <set field="setShippingOptionRequest" value="anonSinglePageSetShippingOption" />
                <set field="reloadPromoCodeRequest" value="anonSinglePagePromoCode"/>
                <set field="addPromoCodeRequest" value="anonSinglePageValidatePromoCode"/>
                <set field="removePromoCodeRequest" value="anonSinglePageRemovePromoCode"/>
                <set field="reloadBalanceRequest" value="anonSinglePageReloadBalance"/>
                
                <set field="addLoyaltyPointsRequest" value="validateAnonSinglePageLoyaltyPoints"/>
                <set field="removeLoyaltyPointsRequest" value="anonSinglePageRemoveLoyaltyPoints"/>
                <set field="updateLoyaltyPointsRequest" value="validateAnonSinglePageUpdateLoyaltyPoints"/>
                <set field="refreshLoyaltyPointsRequest" value="anonSinglePageRefreshLoyaltyPoints"/>
                
                <!-- Gift Card Payment -->
                <set field="addGiftCardNumberRequest" value="anonSinglePageAddGiftCardNumber"/>
                <set field="removeGiftCardNumberRequest" value="anonSinglePageRemoveGiftCardNumber"/>
                <set field="refreshGiftCardRequest" value="anonSinglePageRefreshGiftCard"/>
                <set field="shoppingCartSize" value="${groovy:org.ofbiz.order.shoppingcart.ShoppingCartEvents.getCartObject(request).size();}"/>
                <set field="useAvailability" value="Y" />
                <set field="loadPca" value="Y" />
                <set field="nextButtonVisible" value="N" />
                <set field="submitOrderButtonVisible" value="Y" />
                <set field="submitOrderAction" value="anonSinglePageSubmitOrder"/>
                <set field="payPalAction" value="anonSinglePageSetPayPalCheckout"/>
                <set field="ebsAction" value="anonSinglePageEBSCheckout"/>
                <set field="payNetzAction" value="anonSinglePagePayNetzCheckout"/>
                <set field="selectedStep" value="onePage" />  

                <set field="storePickupUrl" value="storePickup" />
                <set field="dialogPurpose" value="storePickup_"/>
                <set field="storePickupAction" value="setStorePickup"/>
                
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <condition>
                                <if-compare operator="greater" value="0" field="shoppingCartSize"/>
                            </condition>
                            <actions>
                                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCountry.groovy" />
                                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCustomerAddress.groovy" />
                            </actions>
                            <widgets>
                                <container id="anonSinglePageCheckout" style="anonSinglePageCheckout">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="anonOnePageCheckoutDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="capturePlusJs">
                                                    <include-screen name="capturePlusJs" location="component://osafe/widget/EntryScreens.xml" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="commonDialog">
                                                        <include-screen name="storePickupDialog" location="component://osafe/widget/DialogScreens.xml" />
                                                </html-template-decorator-section>
                                                </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                            <fail-widgets>
                                <container style="displayBox">
                                    <label style="instructions" text="${uiLabelMap.YourShoppingCartIsEmptyInfo}"/>
                                </container>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="anonSinglePagePayPalOrderSummary">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="anonSinglePagePayPalOrderSummary" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="pageTitle" value="${uiLabelMap.OrderSummaryTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="checkoutInfoForm" />
                <set field="checkoutPage" value="payment" />

                <set field="parameters.formNameValue" value="orderreview" global="true" />

                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCustomerAddress.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutPayment.groovy" />
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/entry/StorePaymentOptions.groovy" />

                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutReview.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceOrderSummary.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/cartSalesTaxInfo.groovy" />

                <set field="useAvailability" value="Y" />
                <set field="nextButtonVisible" value="N" />
                <set field="submitOrderButtonVisible" value="Y" />
                <set field="prevButtonVisible" value="N" />
                <set field="submitOrderAction" value="anonSinglePagePayPalSubmitOrder"/>
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="anonSinglePagePayPalOrderSummary" style="anonSinglePagePayPalOrderSummary">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="anonPaypalOrderSummaryDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
<!-- END ANON SINGLE PAGE CHECKOUT -->

<!-- START RETURNING SINGLE PAGE CHECKOUT -->
    <screen name="singlePageCheckout">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="singlePageCheckout" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="pageTitle" value="${uiLabelMap.SinglePageCheckoutTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="singlePageCheckout" />
                <set field="formAction" value="singlePageSubmitOrder" />
                <set field="showAddressSelection" value="Y" />
                <set field="addAddressAction" value="singlePageNewCheckoutAddress"/>
                <set field="isCheckoutPage" value="true" />

                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="${groovy:if(parameters.isPaymentProcessError == 'Y')return '' else return 'Y';}" />
                <set field="updateShippingOptionRequest" value="singlePageUpdateShippingOption" />
                <set field="setShippingOptionRequest" value="singlePageSetShippingOption" />
                <set field="reloadPromoCodeRequest" value="singlePagePromoCode"/>
                <set field="addPromoCodeRequest" value="singlePageValidatePromoCode"/>
                <set field="removePromoCodeRequest" value="singlePageRemovePromoCode"/>
                <set field="reloadBalanceRequest" value="singlePageReloadBalance"/>
                
                <set field="addLoyaltyPointsRequest" value="validateSinglePageLoyaltyPoints"/>
                <set field="removeLoyaltyPointsRequest" value="singlePageRemoveLoyaltyPoints"/>
                <set field="updateLoyaltyPointsRequest" value="validateSinglePageUpdateLoyaltyPoints"/>
                <set field="refreshLoyaltyPointsRequest" value="singlePageRefreshLoyaltyPoints"/>
                
                <!-- Gift Card Payment -->
                <set field="addGiftCardNumberRequest" value="singlePageAddGiftCardNumber"/>
                <set field="removeGiftCardNumberRequest" value="singlePageRemoveGiftCardNumber"/>
                <set field="refreshGiftCardRequest" value="singlePageRefreshGiftCard"/>
                <!-- Store Credit Payment -->
                <set field="addStoreCreditRequest" value="singlePageAddStoreCredit"/>
                <set field="removeStoreCreditRequest" value="singlePageRemoveStoreCredit"/>
                <set field="shoppingCartSize" value="${groovy:org.ofbiz.order.shoppingcart.ShoppingCartEvents.getCartObject(request).size();}"/>
                <set field="useAvailability" value="Y" />
                <set field="loadPca" value="Y" />
                <set field="nextButtonVisible" value="N" />
                <set field="submitOrderButtonVisible" value="Y" />
                <set field="submitOrderAction" value="singlePageSubmitOrder"/>
                <set field="payPalAction" value="singlePageSetPayPalCheckout"/>
                <set field="ebsAction" value="singlePageEBSCheckout"/>
                <set field="payNetzAction" value="singlePagePayNetzCheckout"/>
                <set field="selectedStep" value="onePage" /> 

                <set field="storePickupUrl" value="storePickup" />
                <set field="dialogPurpose" value="storePickup_"/>
                <set field="storePickupAction" value="setStorePickup"/>
                
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <condition>
                                <if-compare operator="greater" value="0" field="shoppingCartSize"/>
                            </condition>
                            <actions>
                                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCountry.groovy" />
                                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCustomerAddress.groovy" />
                            </actions>
                            <widgets>
                                <container id="singlePageCheckout" style="singlePageCheckout">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="onePageCheckoutDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="capturePlusJs">
                                                    <include-screen name="capturePlusJs" location="component://osafe/widget/EntryScreens.xml" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="commonDialog">
                                                        <include-screen name="storePickupDialog" location="component://osafe/widget/DialogScreens.xml" />
                                                </html-template-decorator-section>
                                                </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                            <fail-widgets>
                                <container style="displayBox">
                                    <label style="instructions" text="${uiLabelMap.YourShoppingCartIsEmptyInfo}"/>
                                </container>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="singlePagePayPalOrderSummary">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="singlePagePayPalOrderSummary" />
                <set field="screenMessages" value="Y" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="pageTitle" value="${uiLabelMap.OrderSummaryTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="checkoutInfoForm" />
                <set field="checkoutPage" value="payment" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />

                <set field="parameters.formNameValue" value="orderreview" global="true" />

                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCustomerAddress.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutPayment.groovy" />
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/entry/StorePaymentOptions.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutReview.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceOrderSummary.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/cartSalesTaxInfo.groovy" />

                <set field="useAvailability" value="Y" />
                <set field="nextButtonVisible" value="N" />
                <set field="submitOrderButtonVisible" value="Y" />
                <set field="prevButtonVisible" value="N" />
                <set field="submitOrderAction" value="singlePagePayPalSubmitOrder"/>
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="singlePagePayPalOrderSummary" style="singlePagePayPalOrderSummary">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="payPalOrderSummaryDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="singlePageNewCheckoutAddress">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="singlePageNewCheckoutAddress" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="pageTitle" value="${groovy:if(parameters.contactMechPurposeTypeId.equals('BILLING_LOCATION'))return (uiLabelMap.BillingAddressTitle); else return (uiLabelMap.ShippingAddressTitle);}"/>
                <set field="formName" value="checkoutInfoForm" />
                <set field="formAction" value="singlePageValidateCheckoutAddress" />
                <set field="donePage" value="singlePageCheckout" />

                <set field="title" from-field="pageTitle" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="prevButtonUrl" value="eCommerceShowcart" />
                <set field="nextButtonVisible" value="N" />
                <set field="loadPca" value="Y" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <actions>
                                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCountry.groovy" />
                            </actions>
                            <widgets>
                                <container id="singlePageNewCheckoutAddress" style="singlePageNewCheckoutAddress">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="singlePageNewCustomerAddress" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="capturePlusJs">
                                                    <include-screen name="capturePlusJs" location="component://osafe/widget/EntryScreens.xml" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="singlePageNewCheckoutMultiAddress">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="singlePageNewCheckoutMultiAddress" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="pageTitle" value="${groovy:if(parameters.contactMechPurposeTypeId.equals('BILLING_LOCATION'))return (uiLabelMap.BillingAddressTitle); else return (uiLabelMap.ShippingAddressTitle);}"/>
                <set field="formName" value="checkoutInfoForm" />
                <set field="formAction" value="singlePageValidateCheckoutMultiAddress" />
                <set field="donePage" value="singlePageMultiAddress" />

                <set field="title" from-field="pageTitle" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="prevButtonUrl" value="eCommerceShowcart" />
                <set field="nextButtonVisible" value="N" />
                <set field="loadPca" value="Y" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <actions>
                                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCountry.groovy" />
                            </actions>
                            <widgets>
                                <container id="singlePageNewCheckoutMultiAddress" style="singlePageNewCheckoutMultiAddress">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="singlePageNewCustomerAddress" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="capturePlusJs">
                                                    <include-screen name="capturePlusJs" location="component://osafe/widget/EntryScreens.xml" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="singlePageNewCustomerAddress">
        <section>
            <actions>
            </actions>
            <widgets>
                <include-screen name="contactMechEntryForm" location="component://osafe/widget/EntryScreens.xml" />
            </widgets>
        </section>
    </screen>
<!-- RETURNING SINGLE PAGE CHECKOUT -->

  <!-- START RETURNING MULTI PAGE CHECK OUT SCREENS -->

    <screen name="multiPageCustomerAddress">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="multiPageCustomerAddress" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="showCartFootprint" value="Y" />
                <set field="selectedStep" value="shipping" />
                <set field="pageTitle" value="${uiLabelMap.CustomerAddressTitle}" />
                <set field="title" from-field="pageTitle" />

                <set field="formName" value="checkoutInfoForm" />
                <set field="checkoutPage" value="shippingaddress" />
                <set field="showAddressSelection" value="Y" />

                <set field="prevButtonUrl" value="eCommerceShowcartCheckSession" />
                <set field="doneAction" value="multiPageUpdateCustomerAddress"/>
                <set field="multiAddressAction" value="multiPageCustomerAddressValidation"/>
                <set field="addAddressAction" value="multiPageNewCheckoutAddress"/>

                <!-- Cart footprint action -->
                <set field="showCartBackAction" value="eCommerceShowcart"/>
                <set field="customerAddressBackAction" value="multiPageCustomerAddress"/>
                <set field="shippingOptionsBackAction" value="multiPageShippingOptions"/>
                <set field="loadPca" value="Y" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCustomerAddress.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <actions>
                                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCountry.groovy" />
                            </actions>
                            <widgets>
                                <container id="multiPageCustomerAddress" style="multiPageCustomerAddress">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_SHIPPING_ADDRESS" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="shippingAddressDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_SHIPPING_ADDRESS" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="capturePlusJs">
                                                    <include-screen name="capturePlusJs" location="component://osafe/widget/EntryScreens.xml" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="multiPageNewCheckoutAddress">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="multiPageNewCheckoutAddress" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="selectedStep" value="shipping" />
                <set field="pageTitle" value="${groovy:if(parameters.contactMechPurposeTypeId.equals('BILLING_LOCATION'))return (uiLabelMap.BillingAddressTitle); else return (uiLabelMap.ShippingAddressTitle);}"/>
                <set field="formName" value="checkoutInfoForm" />
                <set field="formAction" value="multiPageValidateCheckoutAddress" />
                <set field="donePage" value="multiPageCustomerAddress" />
                <set field="checkoutPage" value="shippingaddress" />

                <set field="title" from-field="pageTitle" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="prevButtonUrl" value="eCommerceShowcart" />
                <set field="nextButtonVisible" value="N" />
                <set field="loadPca" value="Y" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <actions>
                                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCountry.groovy" />
                            </actions>
                            <widgets>
                                <container id="multiPageNewCheckoutAddress" style="multiPageNewCheckoutAddress">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="multiPageNewCustomerAddress" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="capturePlusJs">
                                                    <include-screen name="capturePlusJs" location="component://osafe/widget/EntryScreens.xml" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
   
    <screen name="multiPageNewCheckoutMultiAddress">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="multiPageNewCheckoutMultiAddress" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="selectedStep" value="shipping" />
                <set field="pageTitle" value="${groovy:if(parameters.contactMechPurposeTypeId.equals('BILLING_LOCATION'))return (uiLabelMap.BillingAddressTitle); else return (uiLabelMap.ShippingAddressTitle);}"/>
                <set field="formName" value="checkoutInfoForm" />
                <set field="formAction" value="multiPageValidateCheckoutMultiAddress" />
                <set field="donePage" value="multiPageMultiAddress" />
                <set field="checkoutPage" value="shippingaddress" />

                <set field="title" from-field="pageTitle" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="prevButtonUrl" value="eCommerceShowcart" />
                <set field="nextButtonVisible" value="N" />
                <set field="loadPca" value="Y" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <actions>
                                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCountry.groovy" />
                            </actions>
                            <widgets>
                                <container id="multiPageNewCheckoutMultiAddress" style="multiPageNewCheckoutMultiAddress">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="multiPageNewCustomerAddress" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="capturePlusJs">
                                                    <include-screen name="capturePlusJs" location="component://osafe/widget/EntryScreens.xml" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="anonMultiPageNewCheckoutMultiAddress">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="anonMultiPageNewCheckoutMultiAddress" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="selectedStep" value="shipping" />
                <set field="pageTitle" value="${groovy:if(parameters.contactMechPurposeTypeId.equals('BILLING_LOCATION'))return (uiLabelMap.BillingAddressTitle); else return (uiLabelMap.ShippingAddressTitle);}"/>
                <set field="formName" value="checkoutInfoForm" />
                <set field="formAction" value="anonMultiPageValidateCheckoutMultiAddress" />
                <set field="donePage" value="anonMultiPageMultiAddress" />
                <set field="checkoutPage" value="shippingaddress" />

                <set field="title" from-field="pageTitle" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="prevButtonUrl" value="eCommerceShowcart" />
                <set field="nextButtonVisible" value="N" />
                <set field="loadPca" value="Y" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <actions>
                                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCountry.groovy" />
                            </actions>
                            <widgets>
                                <container id="multiPageNewCheckoutMultiAddress" style="multiPageNewCheckoutMultiAddress">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="multiPageNewCustomerAddress" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="capturePlusJs">
                                                    <include-screen name="capturePlusJs" location="component://osafe/widget/EntryScreens.xml" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="multiPageShippingOptions">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="multiPageShippingOptions" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="selectedStep" value="shippingMethod" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.ShippingOptionsTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="checkoutInfoForm" />
                <set field="checkoutPage" value="shippingoptions" />
                <set field="defaultShippingMethod" value="GROUND@UPS" />

                <set field="storePickupUrl" value="storePickup" />
                <set field="dialogPurpose" value="storePickup_"/>
                <set field="storePickupAction" value="setStorePickup"/>

                <set field="doneAction" value="multiPageValidateShippingOption"/>
                <set field="backAction" value="multiPageCustomerAddress"/>

                <!-- Cart footprint action -->
                <set field="showCartBackAction" value="eCommerceShowcart"/>
                <set field="customerAddressBackAction" value="multiPageCustomerAddress"/>
                <set field="shippingOptionsBackAction" value="multiPageShippingOptions"/>

            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="multiPageShippingOptions" style="multiPageShippingOptions">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_SHIPPING_METHOD" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="shippingOptionsDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_SHIPPING_METHOD" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="commonDialog">
                                                    <include-screen name="storePickupDialog" location="component://osafe/widget/DialogScreens.xml" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="multiPageOrderSummary">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="multiPageOrderSummary" />
                <set field="selectedStep" value="payment" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="${groovy:if(parameters.isPaymentProcessError == 'Y')return '' else return 'Y';}" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="pageTitle" value="${uiLabelMap.OrderSummaryTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="checkoutInfoForm" />
                <set field="checkoutPage" value="payment" />
                <set field="addPromoCodeRequest" value="validateCartPromoCode"/>
                <set field="removePromoCodeRequest" value="removeCartPromoCode"/>
                <!-- Gift Card Payment -->
                <set field="addGiftCardNumberRequest" value="multiPageAddGiftCardNumber"/>
                <set field="removeGiftCardNumberRequest" value="multiPageRemoveGiftCardNumber"/>
                <!-- Store Credit Payment -->
                <set field="addStoreCreditRequest" value="multiPageAddStoreCredit"/>
                <set field="removeStoreCreditRequest" value="multiPageRemoveStoreCredit"/>
                
                <set field="addLoyaltyPointsRequest" value="validateLoyaltyPoints"/>
                <set field="removeLoyaltyPointsRequest" value="removeLoyaltyPoints"/>
                <set field="updateLoyaltyPointsRequest" value="validateUpdateLoyaltyPoints"/>
                
                <set field="parameters.formNameValue" value="orderreview" global="true" />

                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutPayment.groovy" />
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/entry/StorePaymentOptions.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutReview.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceOrderSummary.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/cartSalesTaxInfo.groovy" />

                <set field="storePickupUrl" value="storePickup" />
                <set field="dialogPurpose" value="storePickup_"/>
                <set field="storePickupAction" value="setMultiPageOrderSummaryStorePickup"/>

                <set field="useAvailability" value="Y" />
                <set field="nextButtonVisible" value="N" />
                <set field="submitOrderButtonVisible" value="Y" />
                <set field="submitOrderAction" value="multiPageSubmitOrder"/>
                <set field="backAction" value="${groovy:if(shippingApplies == true)return 'multiPageShippingOptions' else return '';}"/>
                <set field="prevButtonUrl" value="${groovy:if(shippingApplies == true)return '' else return 'multiPageCustomerAddress';}"/>
                <set field="payPalAction" value="multiPageSetPayPalCheckout"/>
                <set field="ebsAction" value="multiPageEBSCheckout"/>
                <set field="payNetzAction" value="multiPagePayNetzCheckout"/>

                <!-- Cart footprint action -->
                <set field="showCartBackAction" value="eCommerceShowcart"/>
                <set field="customerAddressBackAction" value="multiPageCustomerAddress"/>
                <set field="shippingOptionsBackAction" value="multiPageShippingOptions"/>
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="multiPageOrderSummary" style="multiPageOrderSummary">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="orderSummaryDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="commonDialog">
                                                    <include-screen name="storePickupDialog" location="component://osafe/widget/DialogScreens.xml" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="multiPagePayPalOrderSummary">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="multiPagePayPalOrderSummary" />
                <set field="selectedStep" value="payment" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="pageTitle" value="${uiLabelMap.OrderSummaryTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="checkoutInfoForm" />
                <set field="checkoutPage" value="payment" />

                <set field="parameters.formNameValue" value="orderreview" global="true" />

                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutPayment.groovy" />
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/entry/StorePaymentOptions.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutReview.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceOrderSummary.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/cartSalesTaxInfo.groovy" />

                <set field="useAvailability" value="Y" />
                <set field="nextButtonVisible" value="N" />
                <set field="submitOrderButtonVisible" value="Y" />
                <set field="prevButtonVisible" value="N" />
                <set field="submitOrderAction" value="multiPagePayPalSubmitOrder"/>

                <!-- Cart footprint action -->
                <set field="showCartBackAction" value="eCommerceShowcart"/>
                <set field="customerAddressBackAction" value="multiPageCustomerAddress"/>
                <set field="shippingOptionsBackAction" value="multiPageShippingOptions"/>
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="multiPageOrderSummary" style="multiPageOrderSummary">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="payPalOrderSummaryDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
<!-- END RETURNING MULTI PAGE CHECK OUT SCREENS -->
    <screen name="eCommerceOrderComplete">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="eCommerceOrderComplete" />
                <set field="selectedStep" value="confirmation" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="pageTitle" value="${uiLabelMap.OrderConfirmationTitle} (#${parameters.orderId})" />
                <set field="title" from-field="pageTitle" />
                <set field="completedOrderId" value="${parameters.orderId}"/>

                <!-- For the Google Analytics to know the order was generated -->
                <set field="orderConfirmed" value="Y" />

                <!-- This set has to be before the groovy invocation -->
                <set field="showThankYouStatus" value="Y" />
                <!-- if Pickup In Store was selected, this value will be changed to 'Y' in groovy -->
                <set field="isStorePickUp" value="N" />

                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/eCommerceOrderConfirm.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/orderSalesTaxInfo.groovy" />

                <set field="showCartFootprint" value="Y" />
                <set field="useAvailability" value="N" />
                <set field="prevButtonVisible" value="N" />
                <set field="formName" value="orderCompleteForm" />
                
                <set field="nextButtonUrl" value="main" />
                <set field="nextButtonDescription" value="${uiLabelMap.ContinueShoppingBtn}" />
                
                <set field="cartShippingLabel" value="${uiLabelMap.CartFinalShippingAndHandlingCaption}" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="multiPageOrderConfirm" style="multiPageOrderConfirm">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_ORDER_CONFIRM" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="orderConfirmDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_ORDER_CONFIRM" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>


<!-- START ANON MULTI PAGE CHECK OUT SCREENS -->

    <screen name="anonMultiPageCustomerAddress">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="anonMultiPageCustomerAddress" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="selectedStep" value="shipping" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="showCartFootprint" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.AnonCustomerInformationTitle}" />
                <set field="title" from-field="pageTitle" />
                
                <set field="formName" value="checkoutInfoForm" />
                <set field="checkoutPage" value="shippingaddress" />
                <set field="isCheckoutPage" value="true" />

                <set field="prevButtonUrl" value="eCommerceShowcart" />
                <set field="doneAction" value="anonMultiPageCreateCustomer"/>

                <!-- Cart footprint action -->
                <set field="showCartBackAction" value="eCommerceShowcart"/>
                <set field="customerAddressBackAction" value="anonMultiPageCustomerAddress"/>
                <set field="shippingOptionsBackAction" value="anonMultiPageShippingOptions"/>
                <set field="loadPca" value="Y" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCustomerAddress.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <actions>
                                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCountry.groovy" />
                            </actions>
                            <widgets>
                                <container id="multiPageCustomerAddress" style="multiPageCustomerAddress">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_SHIPPING_ADDRESS" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="anonShippingAddressDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_SHIPPING_ADDRESS" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="capturePlusJs">
                                                    <include-screen name="capturePlusJs" location="component://osafe/widget/EntryScreens.xml" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="anonMultiPageShippingOptions">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="anonMultiPageShippingOptions" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="selectedStep" value="shippingMethod" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.ShippingOptionsTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="checkoutInfoForm" />
                <set field="checkoutPage" value="shippingoptions" />
                <set field="defaultShippingMethod" value="GROUND@UPS" />

                <set field="storePickupUrl" value="storePickup" />
                <set field="dialogPurpose" value="storePickup_"/>
                <set field="storePickupAction" value="setStorePickup"/>
                <set field="doneAction" value="anonMultiPageValidateShippingOption"/>
                <set field="backAction" value="anonMultiPageCustomerAddress"/>

                <!-- Cart footprint action -->
                <set field="showCartBackAction" value="eCommerceShowcart"/>
                <set field="customerAddressBackAction" value="anonMultiPageCustomerAddress"/>
                <set field="shippingOptionsBackAction" value="anonMultiPageShippingOptions"/>
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="multiPageShippingOptions" style="multiPageShippingOptions">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_SHIPPING_METHOD" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="shippingOptionsDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_SHIPPING_METHOD" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="commonDialog">
                                                    <include-screen name="storePickupDialog" location="component://osafe/widget/DialogScreens.xml" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="anonMultiPageOrderSummary">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="anonMultiPageOrderSummary" />
                <set field="selectedStep" value="payment" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="${groovy:if(parameters.isPaymentProcessError == 'Y')return '' else return 'Y';}" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="pageTitle" value="${uiLabelMap.OrderSummaryTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="checkoutInfoForm" />
                <set field="checkoutPage" value="payment" />
                <set field="addPromoCodeRequest" value="anonMultiPageValidateCartPromoCode"/>
                <set field="removePromoCodeRequest" value="anonMultiPageRemoveCartPromoCode"/>
                <!-- Gift Card Payment -->
                <set field="addGiftCardNumberRequest" value="anonMultiPageAddGiftCardNumber"/>
                <set field="removeGiftCardNumberRequest" value="anonMultiPageRemoveGiftCardNumber"/>
                
                <set field="addLoyaltyPointsRequest" value="validateAnonMultiPageLoyaltyPoints"/>
                <set field="removeLoyaltyPointsRequest" value="anonMultiPageRemoveLoyaltyPoints"/>
                <set field="updateLoyaltyPointsRequest" value="validateAnonMultiPageUpdateLoyaltyPoints"/>
                
                <set field="parameters.formNameValue" value="orderreview" global="true" />

                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCustomerAddress.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutPayment.groovy" />
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/entry/StorePaymentOptions.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutReview.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceOrderSummary.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/cartSalesTaxInfo.groovy" />

                <set field="storePickupUrl" value="storePickup" />
                <set field="dialogPurpose" value="storePickup_"/>
                <set field="storePickupAction" value="setMultiPageOrderSummaryStorePickup"/>

                <set field="useAvailability" value="Y" />
                <set field="nextButtonVisible" value="N" />
                <set field="submitOrderButtonVisible" value="Y" />
                <set field="submitOrderAction" value="anonMultiPageSubmitOrder"/>
                <set field="backAction" value="${groovy:if(shippingApplies == true)return 'anonMultiPageShippingOptions' else return '';}"/>
                <set field="prevButtonUrl" value="${groovy:if(shippingApplies == true)return '' else return 'anonMultiPageCustomerAddress';}"/>
                <set field="payPalAction" value="anonMultiPageSetPayPalCheckout"/>
                <set field="ebsAction" value="anonMultiPageEBSCheckout"/>
                <set field="payNetzAction" value="anonMultiPagePayNetzCheckout"/>

                <!-- Cart footprint action -->
                <set field="showCartBackAction" value="eCommerceShowcart"/>
                <set field="customerAddressBackAction" value="anonMultiPageCustomerAddress"/>
                <set field="shippingOptionsBackAction" value="anonMultiPageShippingOptions"/>
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="multiPageOrderSummary" style="multiPageOrderSummary">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="anonOrderSummaryDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="commonDialog">
                                                    <include-screen name="storePickupDialog" location="component://osafe/widget/DialogScreens.xml" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="anonMultiPagePayPalOrderSummary">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="anonMultiPagePayPalOrderSummary" />
                <set field="selectedStep" value="payment" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="pageTitle" value="${uiLabelMap.OrderSummaryTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="checkoutInfoForm" />
                <set field="checkoutPage" value="payment" />

                <set field="parameters.formNameValue" value="orderreview" global="true" />

                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceCustomerAddress.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutPayment.groovy" />
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/entry/StorePaymentOptions.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutReview.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommerceOrderSummary.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/cartSalesTaxInfo.groovy" />

                <set field="useAvailability" value="Y" />
                <set field="nextButtonVisible" value="N" />
                <set field="submitOrderButtonVisible" value="Y" />
                <set field="prevButtonVisible" value="N" />
                <set field="submitOrderAction" value="anonMultiPagePayPalSubmitOrder"/>

                <!-- Cart footprint action -->
                <set field="showCartBackAction" value="eCommerceShowcart"/>
                <set field="customerAddressBackAction" value="anonMultiPageCustomerAddress"/>
                <set field="shippingOptionsBackAction" value="anonMultiPageShippingOptions"/>
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="multiPageOrderSummary" style="multiPageOrderSummary">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartFootprint">
                                                    <include-screen name="eCommerceCartFootprint"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="anonPaypalOrderSummaryDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_ORDER_SUMMARY" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
<!-- END ANON MULTI PAGE CHECK OUT SCREENS -->


<!-- GENERAL CHECKOUT SCREENS -->
    
    <!-- CHECKOUT INCLUDES -->
    <screen name="eCommerceEnterPromoCode">
        <section>
        	<actions>
        		<set field="removeShowLoyaltyPointsAdjustedWarning" value="${groovy:session.removeAttribute(&quot;showLoyaltyPointsAdjustedWarning&quot;)}"/>
        	</actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/eCommerceEnterPromoCode.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="eCommerceEnteredPromoCode">
        <section>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/eCommerceEnteredPromoCode.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    
    
    <screen name="eCommerceEnterLoyaltyPoints">
        <section>
        	<actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/eCommerceEnterLoyaltyPoints.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    
    <screen name="eCommerceEnteredLoyaltyPoints">
        <section>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/eCommerceEnteredLoyaltyPoints.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    
    
    
    
    
    <screen name="entryFormJS">
        <section>
            <widgets>
                <platform-specific>
                    <html>
                      <html-template location="component://osafe/webapp/osafe/common/entry/js/formEntryJS.ftl"/>
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="checkoutJS">
        <section>
            <widgets>
                <platform-specific>
                    <html>
                      <html-template location="component://osafe/webapp/osafe/common/entry/js/checkoutJS.ftl"/>
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="cartBillingAddress">
        <section>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/cartBillingAddress.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="cartShippingAddress">
        <section>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/cartShippingAddress.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="cartShippingGroups">
        <section>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/cartShippingGroups.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="shippingGroupCartItem">
        <section>
            <actions>
				<script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/cartOrderItems.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/shippingGroupCartItem.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="shippingGroupShipGroupItem">
        <section>
            <actions>
				<script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/shipMultiOptionsShipGroup.groovy" />
				<script location="component://osafe/webapp/osafe/WEB-INF/actions/common/ecommerceCheckoutStoreDetail.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/shippingGroupShipGroupItem.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="orderShippingGroups">
        <section>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/order/orderShippingGroups.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="shippingGroupOrderItem">
        <section>
            <actions>
				<script location="component://osafe/webapp/osafe/WEB-INF/actions/order/orderItem.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/order/orderItem/shippingGroupOrderItem.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="shippingGroupOrderShipGroupItem">
        <section>
            <actions>
				<script location="component://osafe/webapp/osafe/WEB-INF/actions/order/orderShipGroupItem.groovy" />
				<script location="component://osafe/webapp/osafe/WEB-INF/actions/common/ecommerceCheckoutStoreDetail.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/order/orderItem/shippingGroupOrderShipGroupItem.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="paymentInformation">
        <section>
			<actions>
                <set field="showAttrClass" value="Y"/>
			</actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/paymentInformation.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <!-- SINGLE-PAGE INCLUDES -->
    <screen name="singlePageAboutYou">
        <section>
            <actions>
            </actions>
            <widgets>
                <include-screen name="aboutYouEntryForm" location="component://osafe/widget/EntryScreens.xml" />
            </widgets>
        </section>
    </screen>

    <screen name="singlePageBillingAddress">
        <section>
            <actions>
                <set field="addressEntryInfo" value="${uiLabelMap.BillingAddressHeadingInfo}"/>
            </actions>
            <widgets>
                <include-screen name="addressBillingEntryForm" location="component://osafe/widget/EntryScreens.xml" />
            </widgets>
        </section>
    </screen>

    <screen name="singlePageShippingAddress">
        <section>
            <actions>
                <set field="addressEntryInfo" value="${uiLabelMap.ShippingAddressHeadingInfo}"/>
                <set field="isShipping" value="Y"/>
                <set field="multiAddressUrl" value="singlePageMultiAddress"/>
            </actions>
            <widgets>
                <include-screen name="addressShippingEntryForm" location="component://osafe/widget/EntryScreens.xml" />
            </widgets>
        </section>
    </screen>

    <screen name="singlePagePromoCode">
        <section>
            <actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
            </actions>
            <widgets>
                <include-screen name="eCommerceEnterPromoCode"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="singlePageLoyaltyPoints">
        <section>
            <actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
            </actions>
            <widgets>
                <include-screen name="eCommerceEnterLoyaltyPoints"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="singlePageGiftCard">
        <section>
            <actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
            </actions>
            <widgets>
                <include-screen name="ecommerceGiftCardPayment"/>
            </widgets>
        </section>
    </screen>

    <screen name="singlePageShippingOptions">
        <section>
            <actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="dialogPurpose" value="storePickup_"/>
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/setup/EcommerceSetup.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/ecommerceCheckoutStoreDetail.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutShippingOptions.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/eCommerceCheckoutShippingOptions.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="singlePageOrderPayment">
        <section>
	        <actions>
	        	<property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
	            <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommercePaymentMethods.groovy" />
	        </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/eCommerceOrderPaymentMethods.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="singlePageCreateAccount">
        <section>
            <actions>
                <set field="REG_PWD_MIN_CHAR" from-field="REG_PWD_MIN_CHAR" type="Integer" />
                <set field="REG_PWD_MIN_NUM" from-field="REG_PWD_MIN_NUM" type="Integer" />
                <set field="REG_PWD_MIN_UPPER" from-field="REG_PWD_MIN_UPPER" type="Integer" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                      <html-template location="component://osafe/webapp/osafe/common/entry/createAccountEntry.ftl"/>
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

<!--  ANON SINGLE-PAGE-->
    <screen name="anonSinglePageAboutYou">
        <section>
            <actions>
            </actions>
            <widgets>
                <include-screen name="aboutYouEntryForm" location="component://osafe/widget/EntryScreens.xml" />
            </widgets>
        </section>
    </screen>

    <screen name="anonSinglePageBillingAddress">
        <section>
            <actions>
                <set field="addressEntryInfo" value="${uiLabelMap.BillingAddressHeadingInfo}"/>
                <set field="addressAttnName" value="${uiLabelMap.BillingAddressLabel}" />
            </actions>
            <widgets>
                <include-screen name="addressBillingEntryForm" location="component://osafe/widget/EntryScreens.xml" />
            </widgets>
        </section>
    </screen>

    <screen name="anonSinglePageShippingAddress">
        <section>
            <actions>
                <set field="addressEntryInfo" value="${uiLabelMap.ShippingAddressHeadingInfo}"/>
                <set field="addressAttnName" value="${uiLabelMap.ShippingAddressDefaultNickNameLabel}" />
                <set field="isShipping" value="Y"/>
            </actions>
            <widgets>
                <include-screen name="addressShippingEntryForm" location="component://osafe/widget/EntryScreens.xml" />
            </widgets>
        </section>
    </screen>

    <screen name="anonSinglePagePromoCode">
        <section>
            <actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
            </actions>
            <widgets>
                <include-screen name="eCommerceEnterPromoCode"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="anonSinglePageLoyaltyPoints">
        <section>
            <actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
            </actions>
            <widgets>
                <include-screen name="eCommerceEnterLoyaltyPoints"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="anonSinglePageGiftCard">
        <section>
            <actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
            </actions>
            <widgets>
                <include-screen name="ecommerceGiftCardPayment"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="anonSinglePageShippingOptions">
        <section>
            <actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="dialogPurpose" value="storePickup_"/>
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/setup/EcommerceSetup.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/ecommerceCheckoutStoreDetail.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutShippingOptions.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/eCommerceCheckoutShippingOptions.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="anonSinglePageOrderPayment">
        <section>
            <actions>
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommercePaymentMethods.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/eCommerceOrderPaymentMethods.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="anonSinglePageCreateAccount">
        <section>
            <actions>
                <set field="REG_PWD_MIN_CHAR" from-field="REG_PWD_MIN_CHAR" type="Integer" />
                <set field="REG_PWD_MIN_NUM" from-field="REG_PWD_MIN_NUM" type="Integer" />
                <set field="REG_PWD_MIN_UPPER" from-field="REG_PWD_MIN_UPPER" type="Integer" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                      <html-template location="component://osafe/webapp/osafe/common/entry/createAccountEntry.ftl"/>
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <!-- MULTI-PAGE INCLUDES -->
    <screen name="eCommerceCartFootprint">
        <section>
            <widgets>
                <container id="eCommerceCartFootprintContainer">
                    <platform-specific>
                        <html>
                            <html-template location="component://osafe/webapp/osafe/common/eCommerceCartFootprint.ftl" />
                        </html>
                    </platform-specific>
                </container>
            </widgets>
        </section>
    </screen>

    <screen name="multiPageBillingAddress">
        <section>
            <actions>
                <set field="addressEntryInfo" value="${uiLabelMap.BillingAddressHeadingInfo}"/>
                <set field="addressAttnName" value="${uiLabelMap.BillingAddressLabel}" />
            </actions>
            <widgets>
                <include-screen name="addressBillingEntryForm" location="component://osafe/widget/EntryScreens.xml" />
            </widgets>
        </section>
    </screen>
    <screen name="anonMultiPageBillingAddress">
        <section>
            <actions>
                <set field="addressEntryInfo" value="${uiLabelMap.BillingAddressHeadingInfo}"/>
            </actions>
            <widgets>
                <include-screen name="anonAddressBillingEntryForm" location="component://osafe/widget/EntryScreens.xml" />
            </widgets>
        </section>
    </screen>
    

    <screen name="multiPageShippingAddress">
        <section>
            <actions>
                <set field="addressEntryInfo" value="${uiLabelMap.ShippingAddressHeadingInfo}"/>
                <set field="multiAddressUrl" value="multiPageMultiAddress"/>
                <set field="showAddressEntry" value="Y"/>
                <set field="addressAttnName" value="${uiLabelMap.ShippingAddressDefaultNickNameLabel}" />
            </actions>
            <widgets>
                <include-screen name="addressShippingEntryForm" location="component://osafe/widget/EntryScreens.xml" />
            </widgets>
        </section>
    </screen>
    <screen name="multiPageNewCustomerAddress">
        <section>
            <actions>
            </actions>
            <widgets>
                <include-screen name="contactMechEntryForm" location="component://osafe/widget/EntryScreens.xml" />
            </widgets>
        </section>
    </screen>
    
    <screen name="multiPageShippingOptionList">
        <section>
            <actions>
            	<script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/showCartItems.groovy" />
            	<script location="component://osafe/webapp/osafe/WEB-INF/actions/common/ecommerceCheckoutStoreDetail.groovy" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutShippingOptions.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/eCommerceCheckoutShippingOptions.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="multiPageCartShippingGroups">
        <section>
            <actions>
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/checkout/eCommerceCheckoutShippingOptions.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/cartShippingGroups.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="multiPageOrderPayment">
        <section>
	        <actions>
	            <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/eCommercePaymentMethods.groovy" />
	        </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/eCommerceOrderPaymentMethods.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="ecommerceGiftCardPayment">
        <section>
            <actions>
            	<property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/ecommerceEnterGiftCardPayment.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="eCommerceEnteredGiftCardPayment">
        <section>
            <widgets>
                <container id="eCommerceEnteredGiftCardPayment" style="js_eCommerceEnteredGiftCardPayment">
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/eCommerceEnteredGiftCardPayment.ftl" />
                    </html>
                </platform-specific>
                </container>
            </widgets>
        </section>
    </screen>

    <screen name="ecommerceGiftCardPaymentInformation">
        <section>
            <actions>
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/ecommerceGiftCardPaymentInformation.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="ecommerceStoreCreditPayment">
        <section>
            <actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/common/ecommerceStoreCreditPayment.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/ecommerceStoreCreditPayment.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="shippingInstructions">
        <section>
            <actions>
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/eCommerceCheckoutShippingInstructions.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="multiPageCreateAccount">
        <section>
            <actions>
                <set field="REG_PWD_MIN_CHAR" from-field="REG_PWD_MIN_CHAR" type="Integer" />
                <set field="REG_PWD_MIN_NUM" from-field="REG_PWD_MIN_NUM" type="Integer" />
                <set field="REG_PWD_MIN_UPPER" from-field="REG_PWD_MIN_UPPER" type="Integer" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                      <html-template location="component://osafe/webapp/osafe/common/entry/createAccountEntry.ftl"/>
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    
    <screen name="eCommerceGiftMessage">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="eCommerceGiftMessage" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.AddGiftMessageTitle}" />
                <set field="title" from-field="pageTitle" />
                
                <set field="formName" value="giftMessageForm" />
                <set field="doneAction" value="setGiftMessage"/>
                <set field="nextButtonDescription" value="${uiLabelMap.SaveBtn}"/>
            
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/giftMessageOrderItem.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="eCommerceShowcart" style="eCommerceShowcart">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_GIFT_MESSAGE" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                	<include-screen name="giftMessageDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_GIFT_MESSAGE" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="eCommerceOrderConfirmGiftMessage">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="eCommerceOrderConfirmGiftMessage" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.AddGiftMessageTitle}" />
                <set field="title" from-field="pageTitle" />
                
                <set field="formName" value="giftMessageForm" />
                <set field="doneAction" value="setGiftMessageConfirm"/>
                <set field="nextButtonDescription" value="${uiLabelMap.SaveBtn}"/>
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/giftMessageOrderItem.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="eCommerceShowcart" style="eCommerceShowcart">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="PTS_GIFT_MESSAGE" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                	<include-screen name="giftMessageConfirmDivSequence" location="component://osafe/widget/EcommerceDivScreens.xml" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageEndContent">
                                                    <include-screen name="PES_GIFT_MESSAGE" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    
    <screen name="giftMessageCartLineInfo">
        <section>
            <actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/giftMessageCartLineInfo.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    
    <screen name="giftMessageEntryForm">
        <section>
            <actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/giftMessageEntryForm.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    
    <screen name="giftMessageButtons">
        <section>
            <actions>
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/giftMessageButtons.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="multiPageMultiAddress">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="multiPageMultiAddress" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="selectedStep" value="shipping" />
                <set field="showCartFootprint" value="Y" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.ShipMultiAddressTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="multiAddressForm" />
                <set field="formAction" value="multiPageValidateMultiAddress" />
                <set field="prevButtonUrl" value="multiPageCustomerAddress"/>
                <set field="addAddressAction" value="multiPageNewCheckoutMultiAddress"/>

                <!-- Cart footprint action -->
                <set field="showCartBackAction" value="eCommerceShowcart"/>
                <set field="customerAddressBackAction" value="multiPageMultiAddress"/>
                <set field="shippingOptionsBackAction" value="multiPageMultiShippingOptions"/>
            
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/shipMultiAddress.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="eCommerceShipMultiAddress" style="eCommerceShipMulti">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="MULTI_ADDR_ESPOT" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="eCommerceCartFootprint" location="component://osafe/widget/EcommerceCheckoutScreens.xml" />
                                                	<include-screen name="shipMultiAddress" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="anonMultiPageMultiAddress">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="anonMultiPageMultiAddress" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="selectedStep" value="shipping" />
                <set field="showCartFootprint" value="Y" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.ShipMultiAddressTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="anonMultiAddressForm" />
                <set field="formAction" value="anonMultiPageValidateMultiAddress" />
                <set field="prevButtonUrl" value="anonMultiPageCustomerAddress"/>
                <set field="addAddressAction" value="anonMultiPageNewCheckoutMultiAddress"/>

                <!-- Cart footprint action -->
                <set field="showCartBackAction" value="eCommerceShowcart"/>
                <set field="customerAddressBackAction" value="anonMultiPageMultiAddress"/>
                <set field="shippingOptionsBackAction" value="anonMultiPageMultiShippingOptions"/>
            
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/shipMultiAddress.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="eCommerceShipMultiAddress" style="eCommerceShipMulti">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="MULTI_ADDR_ESPOT" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="eCommerceCartFootprint" location="component://osafe/widget/EcommerceCheckoutScreens.xml" />
                                                	<include-screen name="shipMultiAddress" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>    

    <screen name="singlePageMultiAddress">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="singlePageMultiAddress" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.ShipMultiAddressTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="multiAddressForm" />
                <set field="formAction" value="singlePageValidateMultiAddress" />
                <set field="prevButtonUrl" value="singlePageCheckout"/>
                <set field="addAddressAction" value="singlePageNewCheckoutMultiAddress"/>
            
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/shipMultiAddress.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="eCommerceShipMultiAddress" style="eCommerceShipMulti">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="MULTI_ADDR_ESPOT" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                	<include-screen name="shipMultiAddress" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="anonSinglePageMultiAddress">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="anonSinglePageMultiAddress" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.ShipMultiAddressTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="multiAddressForm" />
                <set field="prevButtonUrl" value="anonSinglePageCheckout"/>
                <set field="nextButtonUrl" value="anonSinglePageShipGroupAddress"/>
            
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/shipMultiAddress.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="eCommerceShipMultiAddress" style="eCommerceShipMulti">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="MULTI_ADDR_ESPOT" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                	<include-screen name="shipMultiAddress" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>    
    
    <screen name="shipMultiAddress">
        <section>
            <actions>
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/shipMultiAddress.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="shipMultiAddressCartItem">
        <section>
            <actions>
				<script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/cartOrderItems.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/shipMultiAddressCartItem.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <screen name="multiPageMultiShippingOptions">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="multiPageMultiShippingOptions" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="selectedStep" value="shippingMethod"/>
                <set field="checkoutPage" value="shippingoptions" />
                <set field="showCartFootprint" value="Y" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.ShipMultiOptionsTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="multiShipOptionsForm" />
                <set field="formAction" value="multiPageValidateMultiShippingOptions" />
                <set field="nextButtonDescription" value="${uiLabelMap.ContinueBtn}"/>

                <!-- Cart footprint action -->
                <set field="showCartBackAction" value="eCommerceShowcart"/>
                <set field="customerAddressBackAction" value="multiPageCustomerAddress"/>
                <set field="shippingOptionsBackAction" value="multiPageMultiShippingOptions"/>
            
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/shipMultiOptions.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="eCommerceShipMultiAddress" style="eCommerceShipMulti">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="MULTI_SHIPPING_ESPOT" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="eCommerceCartFootprint" location="component://osafe/widget/EcommerceCheckoutScreens.xml" />
                                                	<include-screen name="shipMultiOptions" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="anonMultiPageMultiShippingOptions">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="anonMultiPageMultiShippingOptions" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="selectedStep" value="shippingMethod"/>
                <set field="checkoutPage" value="shippingoptions" />
                <set field="showCartFootprint" value="Y" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.ShipMultiOptionsTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="anonMultiShipOptionsForm" />
                <set field="formAction" value="anonMultiPageValidateMultiShippingOptions" />
                <set field="nextButtonDescription" value="${uiLabelMap.ContinueBtn}"/>

                <!-- Cart footprint action -->
                <set field="showCartBackAction" value="eCommerceShowcart"/>
                <set field="customerAddressBackAction" value="anonMultiPageCustomerAddress"/>
                <set field="shippingOptionsBackAction" value="anonMultiPageMultiShippingOptions"/>

                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/shipMultiOptions.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="eCommerceShipMultiAddress" style="eCommerceShipMulti">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="MULTI_SHIPPING_ESPOT" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                    <include-screen name="eCommerceCartFootprint" location="component://osafe/widget/EcommerceCheckoutScreens.xml" />
                                                	<include-screen name="anonShippingOptionsMultiAddress" />
                                                	<include-screen name="shipMultiOptions" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
        
    <screen name="singlePageMultiShippingOptions">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="singlePageMultiShippingOptions" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.ShipMultiOptionsTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="multiShipOptionsForm" />
                <set field="formAction" value="singlePageValidateMultiShippingOptions" />
                <set field="nextButtonDescription" value="${uiLabelMap.ContinueBtn}"/>
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/shipMultiOptions.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="eCommerceShipMultiAddress" style="eCommerceShipMulti">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="MULTI_SHIPPING_ESPOT" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                	<include-screen name="shipMultiOptions" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="anonSinglePageMultiShippingOptions">
        <section>
            <actions>
                <set field="pageClassIdentifier" value="anonSinglePageMultiShippingOptions" />
                <property-map resource="OSafeUiLabels" map-name="uiLabelMap" global="true" />
                <set field="screenMessages" value="Y" />
                <set field="fieldLevelErrors" value="Y" />
                <set field="pageTitle" value="${uiLabelMap.ShipMultiOptionsTitle}" />
                <set field="title" from-field="pageTitle" />
                <set field="formName" value="multiOptionsForm" />
                <set field="prevButtonUrl" value="eCommerceShipMultiAddress"/>
                <set field="doneAction" value="setShipMultiOptions"/>
                <set field="nextButtonDescription" value="${uiLabelMap.SaveBtn}"/>
            
                <script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/shipMultiOptions.groovy" />
            </actions>
            <widgets>
                <decorator-screen name="${parameters.eCommerceDecoratorName}" location="${parameters.eCommerceDecoratorLocation}">
                    <decorator-section name="title">
                        <include-screen name="pageTitle" location="component://osafe/widget/EcommerceScreens.xml"/>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container id="eCommerceShipMultiAddress" style="eCommerceShipMulti">
                                    <platform-specific>
                                        <html>
                                            <html-template-decorator location="component://osafe/webapp/osafe/templates/commonCheckout.ftl">
                                                <html-template-decorator-section name="entryFormJS">
                                                    <include-screen name="entryFormJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="checkoutJS">
                                                    <include-screen name="checkoutJS"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageMessages">
                                                    <include-screen name="PageMessages" location="${parameters.mainDecoratorLocation}" />
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="pageTopContent">
                                                    <include-screen name="MULTI_SHIPPING_ESPOT" location="component://osafe/widget/EcommerceContentScreens.xml"/>
                                                </html-template-decorator-section>
                                                <html-template-decorator-section name="cartBody">
                                                	<include-screen name="shipMultiOptions" />
                                                </html-template-decorator-section>
                                            </html-template-decorator>
                                        </html>
                                    </platform-specific>
                                </container>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>


    <screen name="shipMultiOptions">
        <section>
            <actions>
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/shipMultiOptions.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
	<screen name="anonShippingOptionsMultiAddress">
		<section>
			<actions>
				<set field="multiAddressUrl" value="anonMultiPageMultiAddress" />
                <set field="attributeClass" value="action multiAddress shippingOptionsMultiAddress"/>
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template
							location="component://osafe/webapp/osafe/common/entry/shipping/shippingMultiShipAddress.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>
    
    <screen name="shipMultiOptionsCartItem">
        <section>
            <actions>
				<script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/cartOrderItems.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/shipMultiOptionsCartItem.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="shipMultiOptionsShipGroupItem">
        <section>
            <actions>
				<script location="component://osafe/webapp/osafe/WEB-INF/actions/cart/shipMultiOptionsShipGroup.groovy" />
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://osafe/webapp/osafe/common/cart/shipMultiOptionsShipGroupItem.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    
</screens>