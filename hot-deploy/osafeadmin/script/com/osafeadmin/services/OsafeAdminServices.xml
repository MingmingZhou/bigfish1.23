<?xml version="1.0" encoding="UTF-8"?>

<simple-methods xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://www.ofbiz.org/dtds/simple-methods.xsd">

    <simple-method method-name="createProductStoreParm" short-description="Create a Product Store Parm">
        <if-empty field="parameters.parmKey">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankParamKeyError"/>
            <string-to-list string="${tempErrorMessage}" message-field="parmKey" list="error_list"/>
            <else>
                <set field="idLength" value="60" type="Integer"/>
                <set field="spaceReplacement" value=" " type="String"/>
                <set field="makeUpCase" value="true" type="Boolean"/>
                <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="parmKey">
                    <field field="parameters.parmKey" type="String"/>
                    <field field="idLength" type="Integer"/>
                    <field field="spaceReplacement" type="String"/>
                    <field field="makeUpCase" type="boolean"/>
                </call-class-method>
                <if-empty field="parmKey">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidParamKeyError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="parmKey" list="error_list"/>
                    <else>
                        <entity-one entity-name="XProductStoreParm" value-field="lookedUpValue"/>
                        <if-not-empty field="lookedUpValue">
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ParamKeyExistError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="parmKey" list="error_list"/>
                            <else>
                                <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
                                    <field field="parameters.parmKey"/>
                                </call-class-method>
                                <if-compare field="isValidId" operator="equals" value="false">
                                    <set field="errorKey" from-field="parameters.parmKey"/>
                                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
                                    <string-to-list string="${tempErrorMessage}" message-field="parmKey" list="error_list"/>
                                </if-compare>
                                <set field="parameters.parmKey" from-field="parmKey"/>                            
                            </else>
                        </if-not-empty> 
                    </else>
                </if-empty>
            </else>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidDescriptionParameterError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.parmCategory">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankParamCategoryError"/>
            <string-to-list string="${tempErrorMessage}" message-field="parmCategory" list="error_list"/>
        </if-empty>
        <if-not-empty field="parameters.parmValue">
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countLessThan">
                   <field field="parameters.parmValue" type="String"/>
                   <string value="&lt;"/>
            </call-class-method>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countGreaterThan">
                   <field field="parameters.parmValue" type="String"/>
                   <string value="&gt;"/>
            </call-class-method>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countNewLine">
                   <field field="parameters.parmValue" type="String"/>
                   <string value="${sys:getProperty('line.separator')}"/>
            </call-class-method>
            <if-compare operator="not-equals" value="${countLessThan}" field="countGreaterThan">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BadValueUnequalTagsError"/>
                <string-to-list string="${tempErrorMessage}"  message-field="parmValue" list="error_list"/>
            </if-compare>
            <if-compare operator="greater" value="0" field="countNewLine">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BadValueNewLineError"/>
                <string-to-list string="${tempErrorMessage}"  message-field="parmValue" list="error_list"/>
                <else>
                	<call-object-method method-name="trim" obj-field="parameters.parmValue" ret-field="parameters.parmValue"/>
                </else>
            </if-compare>
        </if-not-empty>
        <check-errors/>
        <make-value entity-name="XProductStoreParm" value-field="lookedUpValue"/>
        <set-pk-fields map="parameters" value-field="lookedUpValue"/>
        <set-nonpk-fields map="parameters" value-field="lookedUpValue"/>
        <create-value value-field="lookedUpValue"/>
        <field-to-result field="parameters.productStoreId" result-name="productStoreId"/>
        <field-to-result field="parameters.parmKey" result-name="parmKey"/>
        
        <set field="editProductStoreParm" from-field="parameters.parmKey"/>
        <property-to-field resource="OSafeAdminUiLabels" property="EditProductStoreParmSuccess" field="editProductStoreParmSuccessMessage"/>
        <string-to-list string="${editProductStoreParmSuccessMessage}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="deleteProductStoreParm" short-description="Create a Product Store Parm">
        <if-empty field="parameters.parmKey">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankParamKeyError"/>
            <string-to-list string="${tempErrorMessage}" message-field="parmKey" list="error_list"/>
        </if-empty>
        <check-errors/>
        <entity-one entity-name="XProductStoreParm" value-field="lookedUpValue"/>
        <if-not-empty field="lookedUpValue">
            <remove-value value-field="lookedUpValue"/>
            <property-to-field resource="OSafeAdminUiLabels" property="DeletedSuccess" field="deletedSuccessMessage"/>
            <string-to-list string="${deletedSuccessMessage}" list="successMessageList"/>
        </if-not-empty>
    </simple-method>
    
    <simple-method method-name="updateProductStoreParm" short-description="Update a ProductStoreParm">
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidDescriptionParameterError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <!-- <if-empty field="parameters.parmValue">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidValueParameterError"/>
            <string-to-list string="${tempErrorMessage}" message-field="PARMVALUE" list="error_list"/>
        </if-empty> -->
        <if-empty field="parameters.parmCategory">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidCategoryParameterError"/>
            <string-to-list string="${tempErrorMessage}" message-field="parmCategory" list="error_list"/>
        </if-empty>
        <if-not-empty field="parameters.parmValue">
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countLessThan">
                   <field field="parameters.parmValue" type="String"/>
                   <string value="&lt;"/>
            </call-class-method>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countGreaterThan">
                   <field field="parameters.parmValue" type="String"/>
                   <string value="&gt;"/>
            </call-class-method>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countNewLine">
                   <field field="parameters.parmValue" type="String"/>
                   <string value="${sys:getProperty('line.separator')}"/>
            </call-class-method>
            <if-compare operator="not-equals" value="${countLessThan}" field="countGreaterThan">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BadValueUnequalTagsError"/>
                <string-to-list string="${tempErrorMessage}" message-field="parmValue" list="error_list"/>
            </if-compare>
            <if-compare operator="greater" value="0" field="countNewLine">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BadValueNewLineError"/>
                <string-to-list string="${tempErrorMessage}" message-field="parmValue" list="error_list"/>
                <else>
                	<call-object-method method-name="trim" obj-field="parameters.parmValue" ret-field="parameters.parmValue"/>
                </else>
            </if-compare>
        </if-not-empty>
        <check-errors/>
        <entity-one entity-name="XProductStoreParm" value-field="lookedUpValue"/>
        <set-nonpk-fields map="parameters" value-field="lookedUpValue"/>
        <store-value value-field="lookedUpValue"/>
        <if-compare field="parameters.parmKey" operator="equals" value="CURRENCY_UOM_DEFAULT">
            <call-class-method class-name="org.ofbiz.base.util.UtilProperties" method-name="setPropertyValue">
                <string value="general.properties" />
                <string value="currency.uom.id.default" />
                <field field="parameters.parmValue" type="String" />
            </call-class-method>
        </if-compare>
        <field-to-result field="parameters.productStoreId" result-name="productStoreId"/>
        <field-to-result field="parameters.parmKey" result-name="parmKey"/>
        
        <set field="editProductStoreParm" from-field="parameters.parmKey"/>
        <property-to-field resource="OSafeAdminUiLabels" property="EditProductStoreParmSuccess" field="editProductStoreParmSuccessMessage"/>
        <string-to-list string="${editProductStoreParmSuccessMessage}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="updateUiLabel" short-description="Update a uilabel">
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.value">
           <set field="parameters.value" value=" "/>
       </if-empty> 
       <if-not-empty field="parameters.value">
       		<set field="flag" value="0" />
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countLessThan">
                   <field field="parameters.value" type="String"/>
                   <string value="&lt;"/>
            </call-class-method>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countGreaterThan">
                   <field field="parameters.value" type="String"/>
                   <string value="&gt;"/>
            </call-class-method>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countNewLine">
                   <field field="parameters.value" type="String"/>
                   <string value="${sys:getProperty('line.separator')}"/>
            </call-class-method>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countBackSlash">
                   <field field="parameters.value" type="String"/>
                   <string value="\\"/>
            </call-class-method>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="checkEvenNumber" ret-field="checkCount">
                   <field field="countBackSlash" type="int"/>
            </call-class-method>
           
           <if>
            		<condition>
            			<or>
            				<if-compare operator="equals" value="odd" field="checkCount"></if-compare>
            			</or>
            		</condition>
            		<then>
            			<set field="flag" value="1"/>
            		</then>
            		<else>
			            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countDoubleBackSlash">
			                   <field field="parameters.value" type="String"/>
			                   <string value="\\\\"/>
			            </call-class-method>
			            <if-compare-field operator="not-equals" field="countDoubleBackSlash" to-field="countBackSlash">
			            	<set field="flag" value="1"/>
			            </if-compare-field>
            		</else>
            </if>
            <if-compare operator="not-equals" value="${countLessThan}" field="countGreaterThan">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BadValueUnequalTagsError"/>
                <string-to-list string="${tempErrorMessage}"  message-field="value" list="error_list"/>
            </if-compare>
            <if-compare operator="greater" value="0" field="countNewLine">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BadValueNewLineError"/>
                <string-to-list string="${tempErrorMessage}" message-field="value" list="error_list"/>
            </if-compare>
        </if-not-empty>
        <check-errors/>
        <set-service-fields service-name="updateLabelXml" map="parameters" to-map="updateLabelXmlCtx"/>
        <call-service service-name="updateLabelXml" in-map-name="updateLabelXmlCtx"/>
        <field-to-result field="parameters.key" result-name="key"/>
        
        <set field="editUiLabelKey" from-field="parameters.key"/>
        <property-to-field resource="OSafeAdminUiLabels" property="EditUiLabelKeySuccess" field="editUiLabelKeySuccessMessage"/>
        <string-to-list string="${editUiLabelKeySuccessMessage}" list="successMessageList"/>
        <if-compare operator="equals" value="1" field="flag">
        	<property-to-field resource="OSafeAdminUiLabels" property="EditUiLabelKeyContainsBackslashSuccess" field="editUiLabelKeySuccessMessage"/>
        	<string-to-list string="${editUiLabelKeySuccessMessage}" list="successMessageList"/>
        </if-compare>
        
    </simple-method>
    
    <simple-method method-name="createUiLabel" short-description="Create a uilabel">
        <if-empty field="parameters.key">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankKeyError"/>
            <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
        <else>
        
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
                    <field field="parameters.key"/>
            </call-class-method>
            <if-compare field="isValidId" operator="equals" value="false">
                    <set field="errorKey" from-field="parameters.key"/>
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
                    <else>
                        <set field="spaceReplacement" value=" " type="String"/>
                        <set field="makeUpCase" value="false" type="Boolean"/>
                        <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="parameters.key">
                            <field field="parameters.key" type="String"/>
                            <string value="${spaceReplacement}"/>
                            <field field="makeUpCase" type="boolean"/>
                        </call-class-method>
                        <if-empty field="parameters.key">
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidKeyError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
                            <else>
                                <call-class-method class-name="org.ofbiz.base.util.UtilProperties" method-name="getPropertyValue" ret-field="XmlFileStr">
                                    <string value="osafeAdmin.properties"/>
                                    <string value="ecommerce-UiLabel-xml-file"/>
                                </call-class-method>
                                <set field="XmlFilePath" value="${groovy: org.ofbiz.base.util.string.FlexibleStringExpander.expandString(XmlFileStr, context)}" type="String"/>
                                <call-class-method class-name="com.osafe.services.OsafeManageXml" method-name="findByKeyFromXmlFile" ret-field="uiLabelEntry">
                                    <field field="XmlFilePath" type="String"/>
                                    <string value="key"/>
                                    <field field="parameters.key" type="String"/>
                                </call-class-method>
                                <if-not-empty field="uiLabelEntry">
                                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="KeyExistError"/>
                                    <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
                                </if-not-empty>
                            </else>
                        </if-empty>
                    </else>
            </if-compare> 
        </else>
        </if-empty>
        <if-empty field="parameters.category">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankCategoryError"/>
            <string-to-list string="${tempErrorMessage}" message-field="category" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-not-empty field="parameters.value">
        	<set field="flag" value="0"/>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countLessThan">
                   <field field="parameters.value" type="String"/>
                   <string value="&lt;"/>
            </call-class-method>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countGreaterThan">
                   <field field="parameters.value" type="String"/>
                   <string value="&gt;"/>
            </call-class-method>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countNewLine">
                   <field field="parameters.value" type="String"/>
                   <string value="${sys:getProperty('line.separator')}"/>
            </call-class-method>
            <if-compare operator="not-equals" value="${countLessThan}" field="countGreaterThan">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BadValueUnequalTagsError"/>
                <string-to-list string="${tempErrorMessage}" message-field="value" list="error_list"/>
            </if-compare>
            <if-compare operator="greater" value="0" field="countNewLine">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BadValueNewLineError"/>
                <string-to-list string="${tempErrorMessage}" message-field="value" list="error_list"/>
            </if-compare>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countBackSlash">
                   <field field="parameters.value" type="String"/>
                   <string value="\\"/>
            </call-class-method>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="checkEvenNumber" ret-field="checkCount">
                   <field field="countBackSlash" type="int"/>
            </call-class-method>
            <if>
            		<condition>
            			<or>
            				<if-compare operator="equals" value="odd" field="checkCount"></if-compare>
            			</or>
            		</condition>
            		<then>
            			<set field="flag" value="1"/>
            		</then>
            		<else>
			            <call-class-method class-name="com.osafe.util.OsafeAdminUtil" method-name="countOccurrences" ret-field="countDoubleBackSlash">
			                   <field field="parameters.value" type="String"/>
			                   <string value="\\\\"/>
			            </call-class-method>
			            <if-compare-field operator="not-equals" field="countDoubleBackSlash" to-field="countBackSlash">
			            	<set field="flag" value="1"/>
			            </if-compare-field>
            		</else>
            </if>
        </if-not-empty>
        <check-errors/>
        <set-service-fields service-name="addUiLabelXml" map="parameters" to-map="addUiLabelXmlCtx"/>
        <call-service service-name="addUiLabelXml" in-map-name="addUiLabelXmlCtx"/>
        <field-to-result field="parameters.key" result-name="key"/>
        
        <set field="editUiLabelKey" from-field="parameters.key"/>
        <property-to-field resource="OSafeAdminUiLabels" property="EditUiLabelKeySuccess" field="editUiLabelKeySuccessMessage"/>
        <string-to-list string="${editUiLabelKeySuccessMessage}" list="successMessageList"/>
		<if-compare operator="equals" value="1" field="flag">
        	<property-to-field resource="OSafeAdminUiLabels" property="EditUiLabelKeyContainsBackslashSuccess" field="editUiLabelKeySuccessMessage"/>
        	<string-to-list string="${editUiLabelKeySuccessMessage}" list="successMessageList"/>
        </if-compare>
    </simple-method>
   
    <simple-method method-name="deleteDivSeqItem" short-description="Delete Div seq item from xml file">
        <if-empty field="parameters.key">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankKeyError"/>
            <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.screen">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankScreenError"/>
            <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
        </if-empty>
        <check-errors/>
        
        
       	<set field="showDetail" value="true"/>
       	<field-to-result field="showDetail"/>
        <field-to-result field="parameters.screenType" result-name="screenType"/>
        
        <set-service-fields service-name="deleteDivSeqItemXml" map="parameters" to-map="deleteDivSeqItemXmlCtx"/>
        <call-service service-name="deleteDivSeqItemXml" in-map-name="deleteDivSeqItemXmlCtx"/>
        <property-to-field resource="OSafeAdminUiLabels" property="DeletedSuccess" field="deletedSuccessMessage"/>
        <string-to-list string="${deletedSuccessMessage}" list="successMessageList"/>
    </simple-method>
    

    <simple-method method-name="deleteUiLabel" short-description="Delete UiLabel from xml file">
        <if-empty field="parameters.key">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankKeyError"/>
            <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
        </if-empty>
        <check-errors/>
        <set-service-fields service-name="deleteUiLabelXml" map="parameters" to-map="deleteUiLabelXmlCtx"/>
        <call-service service-name="deleteUiLabelXml" in-map-name="deleteUiLabelXmlCtx"/>
        <property-to-field resource="OSafeAdminUiLabels" property="DeletedSuccess" field="deletedSuccessMessage"/>
        <string-to-list string="${deletedSuccessMessage}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="clearCache" short-description="clear cache">
        <if-not-empty field="parameters.cacheName">
            <call-class-method class-name="org.ofbiz.base.util.StringUtil" method-name="split" ret-field="cacheResourceList">
                   <field field="parameters.cacheName" type="String"/>
                   <string value="|" />
            </call-class-method>
            <iterate entry="cacheName" list="cacheResourceList">
                <call-class-method class-name="org.ofbiz.base.util.cache.UtilCache"  method-name="findCache" ret-field="utilCache" >
                    <field field="cacheName" type="String"/>
                </call-class-method>
                <if-not-empty field="utilCache">
                    <call-object-method method-name="clear" obj-field="utilCache"></call-object-method>
                    <set field="cacheSuccessful" value="Y"/>
                </if-not-empty>
            </iterate>
            <if-not-empty field="cacheSuccessful">
                <set field="argListNames[]" from-field="parameters.cacheType" set-if-null="true"/>
                <property-to-field resource="OSafeAdminUiLabels" property="ClearCacheSuccess" field="clearCacheSuccess" arg-list-name="argListNames"/>
                <string-to-list string="${clearCacheSuccess}" list="successMessageList"/>    
	        <else>
	            <property-to-field resource="OSafeAdminUiLabels" property="ClearCacheError" field="clearCacheError"/>
	            <string-to-list string="${clearCacheError}" message-field="cacheName" list="error_list"/>
	        </else>
            </if-not-empty>
        </if-not-empty>
        <check-errors/>
    </simple-method>

    <simple-method method-name="solrReIndex" short-description="Re-Index solr">
       <set-service-fields service-name="genProductsIndex" map="parameters" to-map="genProductsIndexCtx"/>
       <call-service service-name="genProductsIndex" in-map-name="genProductsIndexCtx">
           <result-to-result result-name="documentListCount"/>
       </call-service>
       <property-to-field resource="OSafeAdminUiLabels" property="solrReIndexSuccess" field="solrReIndexSuccess"/>
       <string-to-list string="${solrReIndexSuccess}" list="successMessageList"/>
    </simple-method>
    
    <!-- DELETE THIS IS FOR TEST JOB -->
    <simple-method method-name="doTestJob" short-description="Re-Index solr">
    	<set field="test.productStoreId" value="RNY_STORE"/>
    	<set field="test.browseRootProductCategoryId" value="TestId_12"/>
       <call-service service-name="testJob" in-map-name="test">
           
       </call-service>
       <property-to-field resource="OSafeAdminUiLabels" property="solrReIndexSuccess" field="solrReIndexSuccess"/>
       <string-to-list string="${solrReIndexSuccess}" list="successMessageList"/>
    </simple-method>
    <!-- DELETE -->

    <simple-method method-name="createContactUsReason" short-description="Create Contact Us Reason">
        <if-empty field="parameters.enumId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ContactUsReasonIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        <else>
            <set field="IdLength" value="20" type="Integer"/>
            <set field="spaceReplacement" value=" " type="String"/>
            <set field="makeUpCase" value="true" type="Boolean"/>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="enumId">
                <field field="parameters.enumId" type="String"/>
                <field field="IdLength" type="Integer"/>
                <field field="spaceReplacement" type="String"/>
                <field field="makeUpCase" type="boolean"/>
            </call-class-method>
            <if-empty field="enumId">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ContactUsReasonIdLengthError"/>
                <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
            <else>
                <entity-one entity-name="Enumeration" value-field="existingEnum"/>
                <if-not-empty field="existingEnum">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ContactUsReasonIdExistError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                    <else>
                        <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
                            <field field="parameters.enumId"/>
                        </call-class-method>
                        <if-compare field="isValidId" operator="equals" value="false">
                            <set field="errorKey" from-field="parameters.enumId"/>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                        </if-compare>
                        <set field="parameters.enumId" from-field="enumId"/> 
                    </else>
                </if-not-empty>
            </else>
            </if-empty>
        </else>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ContactUsReasonDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ContactUsReasonSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
        <else>
            <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                <string value="${parameters.sequenceId}"></string>
            </call-class-method>
            <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ContactUsReasonSequenceIdError"/>
                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                <else>
                    <if>
                        <condition>
                            <and>
                                <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                            </and>
                        </condition>
                        <then></then>
                        <else>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ContactUsReasonSequenceIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                        </else>
                    </if>
                </else>
            </if-compare>
        </else>
        </if-empty>
        <check-errors/>
        <make-value entity-name="Enumeration" value-field="newEntity"/>
        <set field="newEntity.enumId" from-field="parameters.enumId"/>
        <set-nonpk-fields map="parameters" value-field="newEntity"/>
        <create-value value-field="newEntity"/>
        <field-to-result field="parameters.enumId" result-name="enumId"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="ContactUsReasonSavedSuccess" field="contactUsReasonSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="${contactUsReasonSavedSuccess}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="updateContactUsReason" short-description="update Contact Us Reason">
        <if-empty field="parameters.enumId">
           <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ContactUsReasonIdError"/>
           <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ContactUsReasonDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ContactUsReasonSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
            <else>
                <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                    <string value="${parameters.sequenceId}"></string>
                </call-class-method>
                <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ContactUsReasonSequenceIdError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                    <else>
                        <if>
                            <condition>
                                <and>
                                    <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                    <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                                </and>
                            </condition>
                            <then></then>
                            <else>
                                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ContactUsReasonSequenceIdError"/>
                                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                            </else>
                        </if>
                    </else>
                </if-compare>
            </else>
        </if-empty>
        <check-errors/>
        <set-service-fields service-name="updateEnumeration" map="parameters" to-map="updateEnumerationCtx"/>
        <call-service service-name="updateEnumeration" in-map-name="updateEnumerationCtx"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="ContactUsReasonSavedSuccess" field="contactUsReasonSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="${contactUsReasonSavedSuccess}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="deleteContactUsReason" short-description="Delete Contact Us Reason">
        <make-value entity-name="Enumeration" value-field="lookupKeyValue"/>
        <set-pk-fields map="parameters" value-field="lookupKeyValue"/>
        <find-by-primary-key entity-name="Enumeration" map="lookupKeyValue" value-field="lookedUpValue"/>
        <remove-value value-field="lookedUpValue"/>
        <property-to-field resource="OSafeAdminUiLabels" property="DeletedSuccess" field="deletedSuccessMessage"/>
        <string-to-list string="${deletedSuccessMessage}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="createCreditCardType" short-description="Create Credit Card Type">
        <if-empty field="parameters.enumId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        <else>
            <set field="IdLength" value="20" type="Integer"/>
            <set field="spaceReplacement" value=" " type="String"/>
            <set field="makeUpCase" value="true" type="Boolean"/>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="enumId">
                <field field="parameters.enumId" type="String"/>
                <field field="IdLength" type="Integer"/>
                <field field="spaceReplacement" type="String"/>
                <field field="makeUpCase" type="boolean"/>
            </call-class-method>
            <if-empty field="enumId">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeIdLengthError"/>
                <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
            <else>
                <entity-one entity-name="Enumeration" value-field="existingEnum"/>
                <if-not-empty field="existingEnum">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeIdExistError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                    <else>
                        <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
                            <field field="parameters.enumId"/>
                        </call-class-method>
                        <if-compare field="isValidId" operator="equals" value="false">
                            <set field="errorKey" from-field="parameters.enumId"/>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                        </if-compare>
                        <set field="parameters.enumId" from-field="enumId"/> 
                    </else>
                </if-not-empty>
            </else>
            </if-empty>
        </else>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.enumCode">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeCodeError"/>
            <string-to-list string="${tempErrorMessage}" message-field="enumCode" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
        <else>
            <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                <string value="${parameters.sequenceId}"></string>
            </call-class-method>
            <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeSequenceIdError"/>
                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                <else>
                    <if>
                        <condition>
                            <and>
                                <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                            </and>
                        </condition>
                        <then></then>
                        <else>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeSequenceIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                        </else>
                    </if>
                </else>
            </if-compare>
        </else>
        </if-empty>
        <check-errors/>
        <make-value entity-name="Enumeration" value-field="newEntity"/>
        <set field="newEntity.enumId" from-field="parameters.enumId"/>
        <set-nonpk-fields map="parameters" value-field="newEntity"/>
        <create-value value-field="newEntity"/>
        <field-to-result field="parameters.enumId" result-name="enumId"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="CreditCardTypeSavedSuccess" field="creditCardTypeSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="${creditCardTypeSavedSuccess}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="updateCreditCardType" short-description="update Credit Card Type">
        <if-empty field="parameters.enumId">
           <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeIdError"/>
           <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.enumCode">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeCodeError"/>
            <string-to-list string="${tempErrorMessage}" message-field="enumCode" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
            <else>
                <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                    <string value="${parameters.sequenceId}"></string>
                </call-class-method>
                <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeSequenceIdError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                    <else>
                        <if>
                            <condition>
                                <and>
                                    <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                    <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                                </and>
                            </condition>
                            <then></then>
                            <else>
                                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="CreditCardTypeSequenceIdError"/>
                                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                            </else>
                        </if>
                    </else>
                </if-compare>
            </else>
        </if-empty>
        <check-errors/>
        <set-service-fields service-name="updateEnumeration" map="parameters" to-map="updateEnumerationCtx"/>
        <call-service service-name="updateEnumeration" in-map-name="updateEnumerationCtx"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="CreditCardTypeSavedSuccess" field="creditCardTypeSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="${creditCardTypeSavedSuccess}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="deleteCreditCardType" short-description="Delete Credit Card Type">
        <make-value entity-name="Enumeration" value-field="lookupKeyValue"/>
        <set-pk-fields map="parameters" value-field="lookupKeyValue"/>
        <find-by-primary-key entity-name="Enumeration" map="lookupKeyValue" value-field="lookedUpValue"/>
        <remove-value value-field="lookedUpValue"/>
        <property-to-field resource="OSafeAdminUiLabels" property="DeletedSuccess" field="deletedSuccessMessage"/>
        <string-to-list string="${deletedSuccessMessage}" list="successMessageList"/>
    </simple-method>


    <simple-method method-name="createPersonTitle" short-description="Create Person Title">
        <if-empty field="parameters.enumId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PersonTitleIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        <else>
            <set field="IdLength" value="20" type="Integer"/>
            <set field="spaceReplacement" value=" " type="String"/>
            <set field="makeUpCase" value="true" type="Boolean"/>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="enumId">
                <field field="parameters.enumId" type="String"/>
                <field field="IdLength" type="Integer"/>
                <field field="spaceReplacement" type="String"/>
                <field field="makeUpCase" type="boolean"/>
            </call-class-method>
            <if-empty field="enumId">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PersonTitleIdLengthError"/>
                <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
            <else>
                <entity-one entity-name="Enumeration" value-field="existingEnum"/>
                <if-not-empty field="existingEnum">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PersonTitleIdExistError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                    <else>
                        <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
                            <field field="parameters.enumId"/>
                        </call-class-method>
                        <if-compare field="isValidId" operator="equals" value="false">
                            <set field="errorKey" from-field="parameters.enumId"/>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                        </if-compare>
                        <set field="parameters.enumId" from-field="enumId"/> 
                    </else>
                </if-not-empty>
            </else>
            </if-empty>
        </else>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PersonTitleDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PersonTitleSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
        <else>
            <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                <string value="${parameters.sequenceId}"></string>
            </call-class-method>
            <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PersonTitleSequenceIdError"/>
                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                <else>
                    <if>
                        <condition>
                            <and>
                                <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                            </and>
                        </condition>
                        <then></then>
                        <else>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PersonTitleSequenceIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                        </else>
                    </if>
                </else>
            </if-compare>
        </else>
        </if-empty>
        <check-errors/>
        <make-value entity-name="Enumeration" value-field="newEntity"/>
        <set field="newEntity.enumId" from-field="parameters.enumId"/>
        <set-nonpk-fields map="parameters" value-field="newEntity"/>
        <create-value value-field="newEntity"/>
        <field-to-result field="parameters.enumId" result-name="enumId"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="PersonTitleSavedSuccess" field="personTitleSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="${personTitleSavedSuccess}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="updatePersonTitle" short-description="update Person Title">
        <if-empty field="parameters.enumId">
           <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PersonTitleIdError"/>
           <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PersonTitleDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PersonTitleSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
            <else>
                <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                    <string value="${parameters.sequenceId}"></string>
                </call-class-method>
                <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PersonTitleSequenceIdError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                    <else>
                        <if>
                            <condition>
                                <and>
                                    <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                    <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                                </and>
                            </condition>
                            <then></then>
                            <else>
                                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PersonTitleSequenceIdError"/>
                                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                            </else>
                        </if>
                    </else>
                </if-compare>
            </else>
        </if-empty>
        <check-errors/>
        <set-service-fields service-name="updateEnumeration" map="parameters" to-map="updateEnumerationCtx"/>
        <call-service service-name="updateEnumeration" in-map-name="updateEnumerationCtx"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="PersonTitleSavedSuccess" field="personTitleSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="${personTitleSavedSuccess}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="deletePersonTitle" short-description="Delete Person Title">
        <make-value entity-name="Enumeration" value-field="lookupKeyValue"/>
        <set-pk-fields map="parameters" value-field="lookupKeyValue"/>
        <find-by-primary-key entity-name="Enumeration" map="lookupKeyValue" value-field="lookedUpValue"/>
        <remove-value value-field="lookedUpValue"/>
        <property-to-field resource="OSafeAdminUiLabels" property="DeletedSuccess" field="deletedSuccessMessage"/>
        <string-to-list string="${deletedSuccessMessage}" list="successMessageList"/>
    </simple-method>
    
    <simple-method method-name="createReviewAges" short-description="Create Review Ages">
        <if-empty field="parameters.enumId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewAgesIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        <else>
            <set field="IdLength" value="20" type="Integer"/>
            <set field="spaceReplacement" value=" " type="String"/>
            <set field="makeUpCase" value="true" type="Boolean"/>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="enumId">
                <field field="parameters.enumId" type="String"/>
                <field field="IdLength" type="Integer"/>
                <field field="spaceReplacement" type="String"/>
                <field field="makeUpCase" type="boolean"/>
            </call-class-method>
            <if-empty field="enumId">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewAgesIdLengthError"/>
                <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
            <else>
                <entity-one entity-name="Enumeration" value-field="existingEnum"/>
                <if-not-empty field="existingEnum">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewAgesIdExistError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                    <else>
                        <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
                            <field field="parameters.enumId"/>
                        </call-class-method>
                        <if-compare field="isValidId" operator="equals" value="false">
                            <set field="errorKey" from-field="parameters.enumId"/>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                        </if-compare>
                        <set field="parameters.enumId" from-field="enumId"/> 
                    </else>
                </if-not-empty>
            </else>
            </if-empty>
        </else>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewAgesDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewAgesSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
        <else>
            <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                <string value="${parameters.sequenceId}"></string>
            </call-class-method>
            <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewAgesSequenceIdError"/>
                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                <else>
                    <if>
                        <condition>
                            <and>
                                <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                            </and>
                        </condition>
                        <then></then>
                        <else>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewAgesSequenceIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                        </else>
                    </if>
                </else>
            </if-compare>
        </else>
        </if-empty>
        <check-errors/>
        <make-value entity-name="Enumeration" value-field="newEntity"/>
        <set field="newEntity.enumId" from-field="parameters.enumId"/>
        <set-nonpk-fields map="parameters" value-field="newEntity"/>
        <create-value value-field="newEntity"/>
        <field-to-result field="parameters.enumId" result-name="enumId"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="ReviewAgesSavedSuccess" field="reviewAgesSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="reviewAgesSavedSuccess" list="successMessageList"/>
    </simple-method>
    
    <simple-method method-name="updateReviewAges" short-description="update Review Ages">
        <if-empty field="parameters.enumId">
           <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewAgesIdError"/>
           <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewAgesDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewAgesSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
            <else>
                <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                    <string value="${parameters.sequenceId}"></string>
                </call-class-method>
                <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewAgesSequenceIdError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                    <else>
                        <if>
                            <condition>
                                <and>
                                    <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                    <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                                </and>
                            </condition>
                            <then></then>
                            <else>
                                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewAgesSequenceIdError"/>
                                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                            </else>
                        </if>
                    </else>
                </if-compare>
            </else>
        </if-empty>
        <check-errors/>
        <set-service-fields service-name="updateEnumeration" map="parameters" to-map="updateEnumerationCtx"/>
        <call-service service-name="updateEnumeration" in-map-name="updateEnumerationCtx"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="ReviewAgesSavedSuccess" field="reviewAgesSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="${reviewAgesSavedSuccess}" list="successMessageList"/>
    </simple-method>
    
    
    <simple-method method-name="deleteReviewAges" short-description="Delete Review Ages">
        <make-value entity-name="Enumeration" value-field="lookupKeyValue"/>
        <set-pk-fields map="parameters" value-field="lookupKeyValue"/>
        <find-by-primary-key entity-name="Enumeration" map="lookupKeyValue" value-field="lookedUpValue"/>
        <remove-value value-field="lookedUpValue"/>
        <property-to-field resource="OSafeAdminUiLabels" property="DeletedSuccess" field="deletedSuccessMessage"/>
        <string-to-list string="${deletedSuccessMessage}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="createRecurrenceFreqType" short-description="Create Frequency Type Type">
        <if-empty field="parameters.enumId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        <else>
            <set field="IdLength" value="20" type="Integer"/>
            <set field="spaceReplacement" value=" " type="String"/>
            <set field="makeUpCase" value="true" type="Boolean"/>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="enumId">
                <field field="parameters.enumId" type="String"/>
                <field field="IdLength" type="Integer"/>
                <field field="spaceReplacement" type="String"/>
                <field field="makeUpCase" type="boolean"/>
            </call-class-method>
            <if-empty field="enumId">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeIdLengthError"/>
                <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
            <else>
                <entity-one entity-name="Enumeration" value-field="existingEnum"/>
                <if-not-empty field="existingEnum">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeIdExistError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                    <else>
                        <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
                            <field field="parameters.enumId"/>
                        </call-class-method>
                        <if-compare field="isValidId" operator="equals" value="false">
                            <set field="errorKey" from-field="parameters.enumId"/>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                        </if-compare>
                        <set field="parameters.enumId" from-field="enumId"/> 
                    </else>
                </if-not-empty>
            </else>
            </if-empty>
        </else>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        
        <if-empty field="parameters.enumCode">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeCodeError"/>
            <string-to-list string="${tempErrorMessage}" message-field="enumCode" list="error_list"/>
            <else>
                <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="intervalVaild">
                    <string value="${parameters.enumCode}"></string>
                </call-class-method>
                <if-compare operator="equals" value="false" field="intervalVaild" type="Boolean">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeCodeError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="enumCode" list="error_list"/>
                </if-compare>
            </else>
        </if-empty>
        
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
        <else>
            <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                <string value="${parameters.sequenceId}"></string>
            </call-class-method>
            <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeSequenceIdError"/>
                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                <else>
                    <if>
                        <condition>
                            <and>
                                <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                            </and>
                        </condition>
                        <then></then>
                        <else>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeSequenceIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                        </else>
                    </if>
                </else>
            </if-compare>
        </else>
        </if-empty>
        
        <check-errors/>
        
        <make-value entity-name="Enumeration" value-field="newEntity"/>
        <set field="newEntity.enumId" from-field="parameters.enumId"/>
        <set-nonpk-fields map="parameters" value-field="newEntity"/>
        <create-value value-field="newEntity"/>
        <field-to-result field="parameters.enumId" result-name="enumId"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeSavedSuccess" field="recurrenceFreqTypeSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="${recurrenceFreqTypeSavedSuccess}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="updateRecurrenceFreqType" short-description="update Frequency Type Type">
        <if-empty field="parameters.enumId">
           <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeIdError"/>
           <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        
        <if-empty field="parameters.enumCode">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeCodeError"/>
            <string-to-list string="${tempErrorMessage}" message-field="enumCode" list="error_list"/>
            <else>
                <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="intervalVaild">
                    <string value="${parameters.enumCode}"></string>
                </call-class-method>
                <if-compare operator="equals" value="false" field="intervalVaild" type="Boolean">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeCodeError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="enumCode" list="error_list"/>
                </if-compare>
            </else>
        </if-empty>
        
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
            <else>
                <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                    <string value="${parameters.sequenceId}"></string>
                </call-class-method>
                <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeSequenceIdError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                    <else>
                        <if>
                            <condition>
                                <and>
                                    <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                    <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                                </and>
                            </condition>
                            <then></then>
                            <else>
                                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeSequenceIdError"/>
                                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                            </else>
                        </if>
                    </else>
                </if-compare>
            </else>
        </if-empty>
        
        <check-errors/>
        
        <set-service-fields service-name="updateEnumeration" map="parameters" to-map="updateEnumerationCtx"/>
        <call-service service-name="updateEnumeration" in-map-name="updateEnumerationCtx"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="RecurrenceFreqTypeSavedSuccess" field="recurrenceFreqTypeSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="${recurrenceFreqTypeSavedSuccess}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="deleteRecurrenceFreqType" short-description="Delete Frequency Type Type">
        <make-value entity-name="Enumeration" value-field="lookupKeyValue"/>
        <set-pk-fields map="parameters" value-field="lookupKeyValue"/>
        <find-by-primary-key entity-name="Enumeration" map="lookupKeyValue" value-field="lookedUpValue"/>
        <remove-value value-field="lookedUpValue"/>
        <property-to-field resource="OSafeAdminUiLabels" property="DeletedSuccess" field="deletedSuccessMessage"/>
        <string-to-list string="${deletedSuccessMessage}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="updateReviewCustomAttribute01" short-description="update Review Custom Attribute 01">
        <if-empty field="parameters.enumId">
           <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewCustomAttributeIdError"/>
           <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewCustomAttributeDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewCustomAttributeSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
            <else>
                <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                    <string value="${parameters.sequenceId}"></string>
                </call-class-method>
                <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewCustomAttributeSequenceIdError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                    <else>
                        <if>
                            <condition>
                                <and>
                                    <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                    <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                                </and>
                            </condition>
                            <then></then>
                            <else>
                                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewCustomAttributeSequenceIdError"/>
                                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                            </else>
                        </if>
                    </else>
                </if-compare>
            </else>
        </if-empty>
        <check-errors/>
        <set-service-fields service-name="updateEnumeration" map="parameters" to-map="updateEnumerationCtx"/>
        <call-service service-name="updateEnumeration" in-map-name="updateEnumerationCtx"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="ReviewCustomAttributeSavedSuccess" field="reviewCustomAttributeSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="${reviewCustomAttributeSavedSuccess}" list="successMessageList"/>
    </simple-method>


    <simple-method method-name="createReviewCustomAttribute01" short-description="Create Review Ages">
        <if-empty field="parameters.enumId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewCustomAttributeIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        <else>
            <set field="IdLength" value="20" type="Integer"/>
            <set field="spaceReplacement" value=" " type="String"/>
            <set field="makeUpCase" value="true" type="Boolean"/>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="enumId">
                <field field="parameters.enumId" type="String"/>
                <field field="IdLength" type="Integer"/>
                <field field="spaceReplacement" type="String"/>
                <field field="makeUpCase" type="boolean"/>
            </call-class-method>
            <if-empty field="enumId">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewCustomAttributeIdLengthError"/>
                <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
            <else>
                <entity-one entity-name="Enumeration" value-field="existingEnum"/>
                <if-not-empty field="existingEnum">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewCustomAttributeIdExistError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                    <else>
                        <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
                            <field field="parameters.enumId"/>
                        </call-class-method>
                        <if-compare field="isValidId" operator="equals" value="false">
                            <set field="errorKey" from-field="parameters.enumId"/>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                        </if-compare>
                        <set field="parameters.enumId" from-field="enumId"/> 
                    </else>
                </if-not-empty>
            </else>
            </if-empty>
        </else>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewCustomAttributeDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewCustomAttributeSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
        <else>
            <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                <string value="${parameters.sequenceId}"></string>
            </call-class-method>
            <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewCustomAttributeSequenceIdError"/>
                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                <else>
                    <if>
                        <condition>
                            <and>
                                <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                            </and>
                        </condition>
                        <then></then>
                        <else>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ReviewCustomAttributeSequenceIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                        </else>
                    </if>
                </else>
            </if-compare>
        </else>
        </if-empty>
        <check-errors/>
        <make-value entity-name="Enumeration" value-field="newEntity"/>
        <set field="newEntity.enumId" from-field="parameters.enumId"/>
        <set-nonpk-fields map="parameters" value-field="newEntity"/>
        <create-value value-field="newEntity"/>
        <field-to-result field="parameters.enumId" result-name="enumId"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="ReviewCustomAttributeSavedSuccess" field="reviewCustomAttributeSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="reviewCustomAttributeSavedSuccess" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="deleteReviewCustomAttribute01" short-description="Delete Review Custom Attribute">
        <make-value entity-name="Enumeration" value-field="lookupKeyValue"/>
        <set-pk-fields map="parameters" value-field="lookupKeyValue"/>
        <find-by-primary-key entity-name="Enumeration" map="lookupKeyValue" value-field="lookedUpValue"/>
        <remove-value value-field="lookedUpValue"/>
        <property-to-field resource="OSafeAdminUiLabels" property="DeletedSuccess" field="deletedSuccessMessage"/>
        <string-to-list string="${deletedSuccessMessage}" list="successMessageList"/>
    </simple-method>

    <!-- Product Attribute Services -->
    <simple-method method-name="createOrderAttribute" short-description="create a OrderAttribute">
        <make-value entity-name="OrderAttribute" value-field="newEntity"/>
        <set-pk-fields map="parameters" value-field="newEntity"/>
        <set-nonpk-fields map="parameters" value-field="newEntity"/>
        <create-value value-field="newEntity"/>
    </simple-method>
    <simple-method method-name="updateOrderAttribute" short-description="update a OrderAttribute">
        <entity-one entity-name="OrderAttribute" value-field="lookedUpValue"/>
        <set-nonpk-fields map="parameters" value-field="lookedUpValue"/>
        <store-value value-field="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="deleteOrderAttribute" short-description="delete a OrderAttribute">
        <entity-one entity-name="OrderAttribute" value-field="lookedUpValue"/>
        <remove-value value-field="lookedUpValue"/>
    </simple-method>

    <simple-method method-name="createOrderItemAttribute" short-description="create a OrderItemAttribute">
        <make-value entity-name="OrderItemAttribute" value-field="newEntity"/>
        <set-pk-fields map="parameters" value-field="newEntity"/>
        <set-nonpk-fields map="parameters" value-field="newEntity"/>
        <create-value value-field="newEntity"/>
    </simple-method>
    <simple-method method-name="updateOrderItemAttribute" short-description="update a OrderItemAttribute">
        <entity-one entity-name="OrderItemAttribute" value-field="lookedUpValue"/>
        <set-nonpk-fields map="parameters" value-field="lookedUpValue"/>
        <store-value value-field="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="deleteOrderItemAttribute" short-description="delete a OrderItemAttribute">
        <entity-one entity-name="OrderItemAttribute" value-field="lookedUpValue"/>
        <remove-value value-field="lookedUpValue"/>
    </simple-method>

    <simple-method method-name="updateStyle" short-description="update style css file">
       <if-empty field="parameters.textData">
           <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankStyleTextDataError"/>
           <string-to-list string="${tempErrorMessage}"  message-field="textData"  list="error_list"/>
       </if-empty>
       <check-errors/>
       <set field="styleFilePath" value="${parameters.activeStyleFilePath}"/>
       <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isNotEmpty" ret-field="isNotEmpty">
           <field field="styleFilePath" type="String"/>
       </call-class-method>
       <if-compare field="isNotEmpty" operator="equals" value="true">
       <!-- check for existence. -->
           <create-object class-name="java.io.File" field="styleFile">
               <field field="styleFilePath" type="String"/>
           </create-object>
           <call-class-method class-name="java.lang.System" method-name="getProperty" ret-field="encoding">
               <string value="file.encoding"/>
           </call-class-method>
           <call-class-method class-name="org.ofbiz.base.util.FileUtil" method-name="writeString">
               <field field="encoding" type="String"/>
               <field field="parameters.textData" type="String"/>
               <field field="styleFile" type="java.io.File"/>
           </call-class-method>
           <call-object-method obj-field="styleFile" method-name="getName" ret-field="fileName"/>
       </if-compare>
       <property-to-field resource="OSafeAdminUiLabels" property="UpdateStyleSuccess" field="updateStyleSuccess"/>
       <string-to-list string="${updateStyleSuccess}" list="successMessageList"/>
    </simple-method>
    
    <simple-method method-name="updateStyleBox" short-description="upload the css file and put content in style edit box" login-required="true">
        <set field="cssFileExtension" value="CSS"/>
         <set-service-fields service-name="uploadFile" map="parameters" to-map="uploadFileCtx"/>
         <call-service service-name="uploadFile" in-map-name="uploadFileCtx">
             <result-to-field result-name="uploadFileName" field="uploadFileName"/>
             <result-to-field result-name="uploadFilePath" field="uploadFilePath"/>
         </call-service>
        <set field="uploadedStyleFileName" from-field="uploadFileName"/>
       <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isNotEmpty" ret-field="isNotEmpty">
           <field field="uploadedStyleFileName" type="String"/>
       </call-class-method>
       <if-compare field="isNotEmpty" operator="equals" value="true">
           <call-object-method method-name="toUpperCase" obj-field="uploadedStyleFileName" ret-field="uploadedStyleFileNameUpperCase"/>
           <call-object-method method-name="endsWith" obj-field="uploadedStyleFileNameUpperCase" ret-field="isCSSFile">
               <field field="cssFileExtension" type="String"/>
           </call-object-method>
           <if-compare field="isCSSFile" operator="not-equals" value="true">
               <add-error><fail-property resource="OSafeAdminUiLabels" property="ReplaceWithFileNotCssError"/></add-error>
           </if-compare>
       <else>
           <add-error><fail-property resource="OSafeAdminUiLabels" property="ReplaceWithFileExistError"/></add-error>
       </else>
       </if-compare>
       <check-errors/>
       <property-to-field resource="OSafeAdminUiLabels" property="UpdateStyleBoxSuccess" field="updateStyleBoxSuccess"/>
       <string-to-list string="${updateStyleBoxSuccess}" list="osafeSuccessMessageList"/>
       <field-to-request field="osafeSuccessMessageList"/>
       
       <field-to-result field="uploadedStyleFileName" result-name="replaceWithFileName"/>
       <field-to-result field="fileName"/>
       <field-to-result field="activeStyleFilePath"/>
    </simple-method>
    
    <simple-method method-name="loadNewStyle" short-description="upload the css file and save file in current theme directory">
        <if-empty field="parameters._uploadedFile_fileName">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="UploadedFileExistError"/>
            <string-to-list string="${tempErrorMessage}" message-field="_uploadedFile_fileName" list="error_list"/>
            <else>
                <call-object-method method-name="toUpperCase" obj-field="parameters._uploadedFile_fileName" ret-field="uploadedStyleFileNameUpperCase"/>
                <call-object-method method-name="endsWith" obj-field="uploadedStyleFileNameUpperCase" ret-field="isCSSFile">
                    <string value=".CSS"/>
                </call-object-method>
                <if-compare field="isCSSFile" operator="equals" value="false">
                    <set field="argListNames[]" from-field="parameters._uploadedFile_fileName"/>
                    <property-to-field resource="OSafeAdminUiLabels" property="UploadedFileNotCssError" field="tempErrorMessage" arg-list-name="argListNames"/>
                    <string-to-list string="${tempErrorMessage}" message-field="_uploadedFile_fileName" list="error_list"/>
                </if-compare>
            </else>
        </if-empty>
        <check-errors/>
        <set-service-fields service-name="getStyleFilePath" map="parameters" to-map="getStyleFilePathCtx"/>
        <call-service service-name="getStyleFilePath" in-map-name="getStyleFilePathCtx">
             <result-to-field result-name="styleFilePath" field="styleFilePath"/>
        </call-service>
        <if-not-empty field="styleFilePath">
            <create-object class-name="java.io.File" field="styleFile">
                <field field="styleFilePath" type="String"/>
            </create-object>
            <call-object-method obj-field="styleFile" method-name="getParentFile" ret-field="parentDirectoryFile"/>
            <set-service-fields service-name="uploadFile" map="parameters" to-map="uploadFileCtx"/>
            <call-service service-name="uploadFile" in-map-name="uploadFileCtx">
                <result-to-field result-name="uploadFileName" field="uploadFileName"/>
                <result-to-field result-name="uploadFilePath" field="uploadFilePath"/>
            </call-service>
            <string-append field="uploadFilePath" string="${uploadFileName}"/>
            <create-object class-name="java.io.File" field="tempUploadedStyleFile">
                <field field="uploadFilePath" type="String"/>
            </create-object>
            <create-object class-name="java.io.File" field="uploadedStyleFile">
                <field field="parentDirectoryFile" type="java.io.File"/>
                <field field="uploadFileName" type="String"/>
            </create-object>
            <call-class-method method-name="copyFile" class-name="org.apache.commons.io.FileUtils">
                <field field="tempUploadedStyleFile" type="java.io.File"/>
                <field field="uploadedStyleFile" type="java.io.File"/>
            </call-class-method>
            <call-object-method obj-field="tempUploadedStyleFile" method-name="delete"/>
        </if-not-empty>
        <property-to-field resource="OSafeAdminUiLabels" property="LoadNewStyleSuccess" field="loadNewStyleSuccess"/>
        <string-to-list string="${loadNewStyleSuccess}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="updateStyleVisualTheme" short-description="update visual theme for style file">
       <set field="productStoreMap.productStoreId" from-field="parameters.productStoreId" />
       <find-by-primary-key entity-name="ProductStore" map="productStoreMap" value-field="productStore" use-cache="true"/>
       <set field="visualThemeResourceMap.visualThemeId" from-field="productStore.visualThemeId" />
       <if-not-empty field="parameters.visualThemeId">
           <set field="visualThemeResourceMap.visualThemeId" from-field="parameters.visualThemeId" />
       </if-not-empty>
       <set field="visualThemeResourceMap.resourceTypeEnumId" value="VT_STYLESHEET" />
       <find-by-and entity-name="VisualThemeResource" map="visualThemeResourceMap" list="themeValueList" use-cache="true"/>
       <call-object-method obj-field="themeValueList" method-name="size" ret-field="themeValueListSize"/>
       <if-compare field="themeValueListSize" operator="greater" value="0" type="Integer">
           <call-class-method class-name="org.ofbiz.entity.util.EntityUtil" method-name="getFirst" ret-field="themeValue">
               <field field="themeValueList" type="List"/>
           </call-class-method>
           <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isNotEmpty" ret-field="isNotEmpty">
               <field field="themeValue.resourceValue" type="String"/>
           </call-class-method>
           <call-object-method obj-field="themeValue.resourceValue" method-name="lastIndexOf" ret-field="lastSlash">
                  <string value="/"/>
           </call-object-method>
           <if>
               <condition>
                   <if-compare field="lastSlash" operator="not-equals" value="-1" type="Integer" />
               </condition>
               <then>
                   <calculate field="lastSlash">
                       <calcop operator="add" >
                           <calcop operator="get" field="lastSlash"/>
                           <number value="1"/>
                       </calcop>
                   </calculate>
                   <set field="startIndex" value="0" type="Integer"/>
                   <set field="endIndex" from-field="lastSlash" type="Integer"/>
                   <call-object-method obj-field="themeValue.resourceValue" method-name="substring" ret-field="newResourceValue">
                       <field field="startIndex" type="int"/>
                       <field field="endIndex" type="int"/>
                   </call-object-method>
                   <string-append field="newResourceValue" string="${parameters.styleFileName}" />
                   <set-service-fields service-name="updateVisualThemeResource" map="themeValue" to-map="updateVisualThemeResourceCtx" />
                   <set field="updateVisualThemeResourceCtx.resourceValue" from-field="newResourceValue" />
                   <call-service service-name="updateVisualThemeResource" in-map-name="updateVisualThemeResourceCtx" />
               </then>
           </if>
        </if-compare>
    </simple-method>

    <simple-method method-name="loadProductFileAndImages" short-description="Method to load product xls file and images.">
        <if-empty field="parameters._productFile_fileName">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankProductFileError"/>
            <string-to-list string="${tempErrorMessage}" message-field="_productFile_fileName" list="error_list"/>
        </if-empty>
        <if-not-empty field="parameters._productFile_fileName">
            <call-object-method method-name="toUpperCase" obj-field="parameters._productFile_fileName" ret-field="productFileNameUpperCase"/>
            <call-object-method method-name="endsWith" obj-field="productFileNameUpperCase" ret-field="isXLSFile">
                <string value=".XLS"/>
            </call-object-method>
            <call-object-method method-name="endsWith" obj-field="productFileNameUpperCase" ret-field="isXMLFile">
                <string value=".XML"/>
            </call-object-method>
            <if>
                <condition>
                    <and>
                        <if-compare field="isXLSFile" operator="equals" value="false"/>
                        <if-compare field="isXMLFile" operator="equals" value="false"/>
                    </and>
                </condition>
                <then>
                    <property-to-field resource="OSafeAdminUiLabels" property="ProductFileNotXlsOrXmlError" field="tempErrorMessage"/>
                    <string-to-list string="${tempErrorMessage}" message-field="_productFile_fileName" list="error_list"/>
                </then>
            </if>
        </if-not-empty>
        <check-errors/>
        <set-service-fields service-name="uploadFile" map="parameters" to-map="uploadFileCtx"/>
        <if-not-empty field="parameters._productFile_fileName">
            <set field="uploadFileCtx.uploadedFile" from-field="parameters.productFile"/>
            <set field="uploadFileCtx._uploadedFile_fileName" from-field="parameters._productFile_fileName"/>
            <call-service service-name="uploadFile" in-map-name="uploadFileCtx">
                <result-to-field result-name="uploadFileName" field="parameters.productFileName"/>
                <result-to-field result-name="uploadFilePath" field="parameters.productFilePath"/>
            </call-service>
            <clear-field field="uploadFileCtx"/>
        </if-not-empty>
        
        <field-to-result field="parameters.productFileName" result-name="uploadedXLSFile"/>
        <field-to-result field="parameters.productFilePath" result-name="uploadedXLSPath"/>
        <field-to-result field="parameters.productLoadImagesDir" result-name="productLoadImagesDir"/>
    </simple-method>

    <simple-method method-name="getStyleFilePath" short-description="get style css file path for specific product store id or visual theme id">

       <set field="returnFilePath" value="" type="String"/>
       <set field="productStoreMap.productStoreId" from-field="parameters.productStoreId" />
       <find-by-primary-key entity-name="ProductStore" map="productStoreMap" value-field="productStore" use-cache="true"/>
       <set field="visualThemeResourceMap.visualThemeId" from-field="productStore.visualThemeId" />
       <if-not-empty field="parameters.visualThemeId">
           <set field="visualThemeResourceMap.visualThemeId" from-field="parameters.visualThemeId" />
       </if-not-empty>
       <set field="visualThemeResourceMap.resourceTypeEnumId" value="VT_STYLESHEET" />
       <find-by-and entity-name="VisualThemeResource" map="visualThemeResourceMap" list="themeValueList" use-cache="true"/>
       <call-object-method obj-field="themeValueList" method-name="size" ret-field="themeValueListSize"/>
       <if-compare field="themeValueListSize" operator="greater" value="0" type="Integer">
           <call-class-method class-name="org.ofbiz.entity.util.EntityUtil" method-name="getFirst" ret-field="themeValue">
               <field field="themeValueList" type="List"/>
           </call-class-method>
           <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isNotEmpty" ret-field="isNotEmpty">
               <field field="themeValue.resourceValue" type="String"/>
           </call-class-method>
           <if-compare field="isNotEmpty" operator="equals" value="true">
              <call-object-method obj-field="themeValue.resourceValue" method-name="indexOf" ret-field="firstSlash">
                  <string value="/"/>
              </call-object-method>
              <calculate field="firstSlash">
                  <calcop operator="add" >
                      <calcop operator="get" field="firstSlash"/>
                      <number value="1"/>
                  </calcop>
              </calculate>
              <set field="endIndex" from-field="firstSlash" type="Integer"/>
              <call-object-method obj-field="themeValue.resourceValue" method-name="indexOf" ret-field="secondSlash">
                  <string value="/"/>
                  <field field="endIndex" type="int"/>
              </call-object-method>
              <if>
                  <condition>
                      <and>
                          <if-compare field="firstSlash" operator="equals" value="1" type="Integer" />
                          <if-compare field="secondSlash" operator="not-equals" value="-1" type="Integer" />
                      </and>
                  </condition>
                  <then>
                      <set field="startIndex" from-field="firstSlash" type="Integer"/>
                      <set field="endIndex" from-field="secondSlash" type="Integer"/>
                      <call-object-method obj-field="themeValue.resourceValue" method-name="substring" ret-field="componentName">
                          <field field="startIndex" type="int"/>
                          <field field="endIndex" type="int"/>
                      </call-object-method>
                      <set field="styleFilePath" value="component://" type="String"/>
                      <string-append field="styleFilePath" string="${componentName}"/>
                      <string-append field="styleFilePath" string="/webapp"/>
                      <string-append field="styleFilePath" string="${themeValue.resourceValue}"/>
                      <call-class-method class-name="org.ofbiz.base.util.FileUtil" method-name="getFile" ret-field="styleFile">
                          <field field="styleFilePath" type="String"/>
                      </call-class-method>
                      <call-object-method obj-field="styleFile" method-name="exists" ret-field="isExist"/>
                      <if-compare field="isExist" operator="equals" value="true">
                          <call-object-method obj-field="styleFile" method-name="getPath" ret-field="returnFilePath"/>
                      </if-compare>
                  </then>
              </if>
           </if-compare>
       </if-compare>
       <field-to-result field="returnFilePath" result-name="styleFilePath"/>
    </simple-method>
    
    <simple-method method-name="getSysConfigFiles" short-description="get system config file list">
       <set field="sysConfigFileList" type="List" />
       <call-class-method class-name="org.ofbiz.base.util.UtilProperties" method-name="getPropertyValue" ret-field="sysConfigComponentNames">
           <string value="osafeAdmin.properties"/>
           <string value="system-configuration-componentnames"/>
       </call-class-method>
       <if-not-empty field="sysConfigComponentNames">
           <call-class-method class-name="org.ofbiz.base.util.StringUtil" method-name="split" ret-field="sysConfigComponentNameList">
               <field field="sysConfigComponentNames" type="String"/>
               <string value="," />
           </call-class-method>
           <call-object-method obj-field="sysConfigComponentNameList" method-name="size" ret-field="sysConfigComponentNameListSize"/>
           <if-compare field="sysConfigComponentNameListSize" operator="greater" value="0" type="Integer">
               <iterate entry="sysConfigComponentName" list="sysConfigComponentNameList">
                   <if-validate-method field="sysConfigComponentName" method="componentExists" class="org.ofbiz.base.component.ComponentConfig">
                       <set field="componentConfigDir" value="component://" type="String"/>
                       <string-append field="componentConfigDir" string="${sysConfigComponentName}"/>
                       <string-append field="componentConfigDir" string="/config"/>
                       <call-class-method class-name="org.ofbiz.base.util.FileUtil" method-name="getFile" ret-field="componentConfigDirFile">
                           <field field="componentConfigDir" type="String"/>
                       </call-class-method>
                        <call-object-method obj-field="componentConfigDirFile" method-name="exists" ret-field="isExist"/>
                        <if-compare field="isExist" operator="equals" value="true">
                            <call-object-method obj-field="componentConfigDirFile" method-name="getAbsolutePath" ret-field="componentConfigDirFilePath"/>
                            <call-class-method class-name="org.ofbiz.base.util.FileUtil" method-name="findFiles" ret-field="componentConfigPropertiesFileList">
                                <string value="properties"/>
                                <field field="componentConfigDirFilePath" type="String"/>
                                <field field=""/>
                                <field field=""/>
                            </call-class-method>
                            <list-to-list to-list="sysConfigFileList" list="componentConfigPropertiesFileList"/>
                            <call-class-method class-name="org.ofbiz.base.util.FileUtil" method-name="findFiles" ret-field="componentConfigXMLFileList">
                                <string value="xml"/>
                                <field field="componentConfigDirFilePath" type="String"/>
                                <field field=""/>
                                <field field=""/>
                            </call-class-method>
                            <list-to-list to-list="sysConfigFileList" list="componentConfigXMLFileList"/>
                        </if-compare>
                    </if-validate-method>
               </iterate>
               <call-class-method class-name="java.lang.System" method-name="getProperty" ret-field="ofbizHome">
                   <string value="ofbiz.home"/>
               </call-class-method>
               <set field="baseDir" from-field="ofbizHome" type="String"/>
               <string-append field="baseDir" string="/framework"/>
               <string-append field="baseDir" string="/base/config"/>
               <create-object class-name="java.io.File" field="ofbizCustomFileList[]">
                   <field field="ofbizHome" type="String"/>
                   <string value="startofbiz.bat"/>
               </create-object>
               <create-object class-name="java.io.File" field="ofbizCustomFileList[]">
                   <field field="ofbizHome" type="String"/>
                   <string value="startofbiz.sh"/>
               </create-object>
               <create-object class-name="java.io.File" field="ofbizCustomFileList[]">
                   <field field="baseDir" type="String"/>
                   <string value="debug.properties"/>
               </create-object>
               <create-object class-name="java.io.File" field="ofbizCustomFileList[]">
                   <field field="baseDir" type="String"/>
                   <string value="cache.properties"/>
               </create-object>
               <list-to-list to-list="sysConfigFileList" list="ofbizCustomFileList"/>
           </if-compare>
       </if-not-empty>
       <field-to-result field="sysConfigFileList" result-name="sysConfigFileList"/>
    </simple-method>

    <simple-method method-name="updateDivSequence" short-description="Updates a div Sequence">
    	<!-- check if we are using grouping -->
    	<set field="useGrouping" value="N"/>
        <iterate-map key="groupNumKey" value="groupNumValue" map="parameters.groups">
        	<if-compare field="useGrouping" operator="equals" value="N">
	            <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="isGroupNumVaild">
	                <field field="groupNumValue" type="String" />
	            </call-class-method>
	            <if-empty field="groupNumValue">
	                <set field="isGroupNumVaild" value="false"/>
	            </if-empty>
	            <if-compare operator="equals" value="true" field="isGroupNumVaild" type="Boolean">
	                <if>
	                   	<condition>
	                        <and>
	                            <if-compare operator="greater-equals" value="1" field="groupNumValue" type="Long"/>
	                            <if-compare operator="less-equals" value="10" field="groupNumValue" type="Long"/>
	                        </and>
	                    </condition>
	                    <then>
	                    	<set field="useGrouping" value="Y"/>
	                    </then>
	                </if>
	            </if-compare>
            </if-compare>
        </iterate-map>
		
		<if-not-empty field="parameters.mode">
			<if-compare field="parameters.mode" operator="equals" value="add">
				<if-empty field="parameters.key">
					<property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankDivSeqKeyError"/>
					<string-to-list string="${tempErrorMessage}" message-field="style" list="error_list"/>
					<else>
						<call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
			                    <field field="parameters.key"/>
			            </call-class-method>
			            <if-compare field="isValidId" operator="equals" value="false">
			                    <set field="errorKey" from-field="parameters.key"/>
			                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
			                    <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
			                    <else>
			                        <set field="spaceReplacement" value=" " type="String"/>
			                        <set field="makeUpCase" value="false" type="Boolean"/>
			                        <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="parameters.key">
			                            <field field="parameters.key" type="String"/>
			                            <string value="${spaceReplacement}"/>
			                            <field field="makeUpCase" type="boolean"/>
			                        </call-class-method>
			                        <if-empty field="parameters.key">
			                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidKeyError"/>
			                            <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
			                            <else>
			                                <call-class-method class-name="org.ofbiz.base.util.UtilProperties" method-name="getPropertyValue" ret-field="XmlFileStr">
			                                    <string value="osafeAdmin.properties"/>
			                                    <string value="osafe-uiSequence-xml-file"/>
			                                </call-class-method>
			                                <set field="XmlFilePath" value="${groovy: org.ofbiz.base.util.string.FlexibleStringExpander.expandString(XmlFileStr, context)}" type="String"/>
			                                <call-class-method class-name="com.osafe.services.OsafeManageXml" method-name="getListMapsFromXmlFile" ret-field="listMaps">
			                                    <field field="XmlFilePath" type="String"/>
			                                </call-class-method>
			                                <call-class-method class-name="com.osafe.services.OsafeManageXml" method-name="findByKeyAndScreenFromListMaps" ret-field="uiDivEntry">
			                                    <field field="listMaps" type="java.util.List"/>
			                                    <string value="key"/>
			                                    <field field="parameters.key" type="String"/>
			                                    <string value="screen"/>
			                                    <field field="parameters.screenType" type="String"/>
			                                </call-class-method>
			                                <if-not-empty field="uiDivEntry">
			                                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="divSeqItemExistError"/>
			                                    <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
			                                </if-not-empty>
			                            </else>
			                        </if-empty>
			                    </else>
			            </if-compare>
					</else>
				</if-empty>
			</if-compare>
		</if-not-empty>
        
        <iterate-map key="sequenceNumKey" value="sequenceNumValue" map="parameters.values">
        	<set field="invalidSeqNum" value="false"/>
            <if-empty field="sequenceNumValue">
                <set field="sequenceNumValue" value="0"/>
				<if-not-empty field="parameters.mode">
					<iterate-map key="key" value="keyValue" map="parameters.keys">
						<if-compare-field field="key" operator="equals" to-field="sequenceNumKey">
							<property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankSeqNumError"/>
							<string-to-list string="${tempErrorMessage}" message-field="style" list="error_list"/>
						</if-compare-field>
					</iterate-map>
				</if-not-empty>
            </if-empty>
            <set field="isMandatorySeq" value="N"/>
        	<iterate-map key="mandatoryKey" value="mandatoryValue" map="parameters.mandatorys">
				<if-compare-field field="mandatoryKey" operator="equals" to-field="sequenceNumKey">
					<if-not-empty field="mandatoryValue">
						<if-compare field="mandatoryValue" operator="equals" value="SYS_YES">
							<set field="isMandatorySeq" value="Y"/>
						</if-compare>
					</if-not-empty>
				</if-compare-field>
			</iterate-map>
            <if-not-empty field="sequenceNumValue">
                <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                    <string value="${sequenceNumValue}"></string>
                </call-class-method>
                <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                    <set field="invalidSeqNum" value="true"/>
                <else>
                    <if>
                        <condition>
                            <and>
                                <if-compare operator="greater-equals" value="0" field="sequenceNumValue" type="Long"/>
                                <if-compare operator="less-equals" value="9000" field="sequenceNumValue" type="Long"/>
                            </and>
                        </condition>
                        <then>
                            <!-- check the group validation -->
                                <iterate-map key="groupNumKey" value="groupNumValue" map="parameters.groups">
                                    <if-compare-field field="groupNumKey" operator="equals" to-field="sequenceNumKey">
                                        <if-empty field="groupNumValue">
                                            <set field="groupNumValue" value="0"/>
                                        </if-empty>
                                        <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="isGroupNumVaild">
                                            <field field="groupNumValue" type="String" />
                                        </call-class-method>
                                        <if-compare operator="equals" value="true" field="isGroupNumVaild" type="Boolean">
                                        	<if-compare operator="greater-equals" value="1" field="sequenceNumValue" type="Long">
	                                            <if>
	                                               <condition>
	                                                    <and>
	                                                        <if-compare operator="greater-equals" value="1" field="groupNumValue" type="Long"/>
	                                                        <if-compare operator="less-equals" value="10" field="groupNumValue" type="Long"/>
	                                                    </and>
	                                                </condition>
	                                                <then></then>
	                                                <else>
	                                                    	<!-- <set field="isGroupNumVaild" value="false"/> -->
	                                                    	<if>
										                        <condition>
										                            <or>
										                                <if-compare operator="less" value="0" field="groupNumValue" type="Long"/>
										                                <if-compare operator="greater" value="10" field="groupNumValue" type="Long"/>
										                            </or>
										                        </condition>
										                        <then>
										                        	<iterate-map key="key" value="keyValue" map="parameters.keys">
						                                                <if-compare-field field="key" operator="equals" to-field="sequenceNumKey">
						                                                    <clear-field field="argListNames"/>
						                                                    <set field="argListNames[]" from-field="keyValue"/>
						                                                    <property-to-field resource="OSafeAdminUiLabels" property="ValidGroupNumberError" field="tempErrorMessage" arg-list-name="argListNames"/>
						                                                    <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
						                                                    <set field="parameters.showDetail" value="true"/>
						                                                </if-compare-field>
						                                            </iterate-map>
										                        </then>
										                        <else>
										                        	<if-compare field="useGrouping" operator="equals" value="Y">
											                        	<if-compare operator="equals" value="0" field="groupNumValue" type="Long">
											                        		<iterate-map key="key" value="keyValue" map="parameters.keys">
								                                                <if-compare-field field="key" operator="equals" to-field="groupNumKey">
								                                                    <clear-field field="argListNames"/>
								                                                    <set field="argListNames[]" from-field="keyValue"/>
								                                                    <property-to-field resource="OSafeAdminUiLabels" property="GroupNumRequiredError" field="tempErrorMessage" arg-list-name="argListNames"/>
								                                                    <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
								                                                    <set field="parameters.showDetail" value="true"/>
								                                                </if-compare-field>
								                                            </iterate-map>
											                        	</if-compare>
										                        	</if-compare>
										                        </else>
										                    </if>
	                                                </else>
	                                            </if>
                                            <else>
                                            	<if-compare operator="equals" value="Y" field="isMandatorySeq">
                                            		<iterate-map key="key" value="keyValue" map="parameters.keys">
		                                                <if-compare-field field="key" operator="equals" to-field="groupNumKey">
		                                                    <clear-field field="argListNames"/>
		                                                    <set field="argListNames[]" from-field="keyValue"/>
		                                                    <property-to-field resource="OSafeAdminUiLabels" property="MandatorySeqNumRequiredError" field="tempErrorMessage" arg-list-name="argListNames"/>
		                                                    <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
		                                                    <set field="parameters.showDetail" value="true"/>
		                                                </if-compare-field>
		                                            </iterate-map>
		                                        <else>
				                                	<if-compare operator="greater" value="0" field="groupNumValue">
	                                                    <iterate-map key="key" value="keyValue" map="parameters.keys">
			                                                <if-compare-field field="key" operator="equals" to-field="groupNumKey">
			                                                    <clear-field field="argListNames"/>
			                                                    <set field="argListNames[]" from-field="keyValue"/>
			                                                    <property-to-field resource="OSafeAdminUiLabels" property="SeqNumRequiredError" field="tempErrorMessage" arg-list-name="argListNames"/>
			                                                    <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
			                                                    <set field="parameters.showDetail" value="true"/>
			                                                </if-compare-field>
			                                            </iterate-map>
				                                	</if-compare>
				                                </else>
			                                	</if-compare>
			                                </else>
                                            </if-compare>
                                            <else>
                                            	<if-compare operator="equals" value="false" field="isGroupNumVaild" type="Boolean">
		                                            <iterate-map key="key" value="keyValue" map="parameters.keys">
		                                                <if-compare-field field="key" operator="equals" to-field="sequenceNumKey">
		                                                    <clear-field field="argListNames"/>
		                                                    <set field="argListNames[]" from-field="keyValue"/>
		                                                    <property-to-field resource="OSafeAdminUiLabels" property="ValidGroupNumberError" field="tempErrorMessage" arg-list-name="argListNames"/>
		                                                    <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
		                                                    <set field="parameters.showDetail" value="true"/>
		                                                </if-compare-field>
		                                            </iterate-map>
		                                        </if-compare>
                                            </else>
                                        </if-compare>
                                    </if-compare-field>
                                </iterate-map>
								<if-not-empty field="parameters.mode">
									<iterate-map key="styleKey" value="styleValue" map="parameters.styles">
										<if-compare-field field="styleKey" operator="equals" to-field="sequenceNumKey">
											<if-empty field="styleValue">
												<property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankStyleError"/>
												<string-to-list string="${tempErrorMessage}" message-field="style" list="error_list"/>
												<else>
													<call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidDesc" ret-field="isValidDesc">
										                    <field field="styleValue"/>
										            </call-class-method>
										            <if-compare field="isValidDesc" operator="equals" value="false">
									                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidStyleError"/>
									                    <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
										            </if-compare>
												</else>
											</if-empty>
										</if-compare-field>
									</iterate-map>
									<iterate-map key="descriptionKey" value="descriptionValue" map="parameters.descriptions">
										<if-compare-field field="descriptionKey" operator="equals" to-field="sequenceNumKey">
											<if-empty field="descriptionValue">
												<property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidDescriptionError"/>
												<string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
											</if-empty>
										</if-compare-field>
									</iterate-map>
								</if-not-empty>
                        </then>
                        <else>
                            <set field="invalidSeqNum" value="true"/>
                        </else>
                    </if>
                </else>
                </if-compare>
            </if-not-empty>
            <if-compare field="invalidSeqNum" type="Boolean" operator="equals" value="true" >
	            <if-compare operator="equals" value="Y" field="isMandatorySeq">
		        	<iterate-map key="key" value="keyValue" map="parameters.keys">
			            <if-compare-field field="key" operator="equals" to-field="sequenceNumKey">
				            <clear-field field="argListNames"/>
				            <set field="argListNames[]" from-field="keyValue"/>
				            <property-to-field resource="OSafeAdminUiLabels" property="MandatorySeqNumRequiredError" field="tempErrorMessage" arg-list-name="argListNames"/>
				            <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
				            <set field="parameters.showDetail" value="true"/>
			            </if-compare-field>
		     		</iterate-map>
	      		<else>
		            <iterate-map key="key" value="keyValue" map="parameters.keys">
		                <if-compare-field field="key" operator="equals" to-field="sequenceNumKey">
		                    <clear-field field="argListNames"/>
		                    <set field="argListNames[]" from-field="keyValue"/>
		                    <property-to-field resource="OSafeAdminUiLabels" property="DivSequencerInvalidSequenceNumber" field="tempErrorMessage" arg-list-name="argListNames"/>
		                    <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
		                    <set field="parameters.showDetail" value="true"/>
		                </if-compare-field>
		            </iterate-map>
				</else>
				</if-compare>
			</if-compare>                    
        </iterate-map>
        <field-to-result field="parameters.showDetail" result-name="showDetail"/>
        <if-not-empty field="parameters.key">
        	<field-to-result field="parameters.key" result-name="key"/>
        </if-not-empty>
        <field-to-result field="parameters.screenType" result-name="screenType"/>
        <check-errors/>
        
        <if-not-empty field="parameters.mode">
        	<set field="showDetail" value="true"/>
        	<field-to-result field="showDetail"/>
        </if-not-empty>
        
        <if-compare field="useGrouping" operator="equals" value="N">
        	<!-- sort the sequence map and make mutiple-->
            <set field="seqMultiple" value="10" type="Integer"/>
            <call-class-method method-name="setSequenceMapByMultiple" class-name="com.osafe.util.OsafeAdminUtil" ret-field="parameters.values">
                <field field="parameters.values" type="java.util.Map"/>
                <field field="seqMultiple" type="Integer"/>
            </call-class-method>
        <else>
        	<if-not-empty field="parameters.groups">
	            <!-- sort the group map and make mutiple-->
	            <call-class-method method-name="setSequenceMap" class-name="com.osafe.util.OsafeAdminUtil" ret-field="parameters.groups">
	                <field field="parameters.groups" type="java.util.Map"/>
	            </call-class-method>
	            <!-- sort the sequence map and make mutiple-->
	            <set field="seqMultiple" value="10" type="Integer"/>
	            <call-class-method method-name="setSequenceMapByMultiple" class-name="com.osafe.util.OsafeAdminUtil" ret-field="parameters.values">
                    <field field="parameters.values" type="java.util.Map"/>
	                <field field="parameters.groups" type="java.util.Map"/>
	                <field field="seqMultiple" type="Integer"/>
	            </call-class-method>
	        </if-not-empty>
        </else>
        </if-compare>
        <iterate-map key="entryKey" value="keyValue" map="parameters.keys">
            <set field="updateDivSequenceXmlCtx.key" from-field="keyValue"/>
            <clear-field field="sequenceNumKey"/>
            <clear-field field="sequenceNumValue"/>
            <iterate-map key="sequenceNumKey" value="sequenceNumValue" map="parameters.values">
                <if-compare-field field="entryKey" to-field="sequenceNumKey" operator="equals">
                    <if-empty field="sequenceNumValue">
                        <set field="sequenceNumValue" value="0" type="String"/>
                    </if-empty>
					<if-not-empty field="parameters.mode">
						<if-compare field="parameters.mode" operator="equals" value="add">
							<if-not-empty field="parameters.key">
								<if-compare-field field="parameters.key" operator="equals" to-field="keyValue">
									<set field="addDivSequenceItemXmlCtx.value" from-field="sequenceNumValue"/>
								</if-compare-field>
							</if-not-empty>
						</if-compare>
					</if-not-empty>
                    <set field="updateDivSequenceXmlCtx.value" from-field="sequenceNumValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="screenKey"/>
            <clear-field field="screenValue"/>
            <iterate-map key="screenKey" value="screenValue" map="parameters.screens">
                <if-compare-field field="entryKey" to-field="screenKey" operator="equals">
					<if-not-empty field="parameters.mode">
						<if-compare field="parameters.mode" operator="equals" value="add">
							<if-not-empty field="parameters.key">
								<if-compare-field field="parameters.key" operator="equals" to-field="keyValue">
									<set field="addDivSequenceItemXmlCtx.screen" from-field="screenValue"/>
								</if-compare-field>
							</if-not-empty>
						</if-compare>
					</if-not-empty>
                    <set field="updateDivSequenceXmlCtx.screen" from-field="screenValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="descriptionKey"/>
            <clear-field field="descriptionValue"/>
            <iterate-map key="descriptionKey" value="descriptionValue" map="parameters.descriptions">
                <if-compare-field field="entryKey" to-field="descriptionKey" operator="equals">
					<if-not-empty field="parameters.mode">
						<if-compare field="parameters.mode" operator="equals" value="add">
							<if-not-empty field="parameters.key">
								<if-compare-field field="parameters.key" operator="equals" to-field="keyValue">
									<set field="addDivSequenceItemXmlCtx.description" from-field="descriptionValue"/>
								</if-compare-field>
							</if-not-empty>
						</if-compare>
					</if-not-empty>
                    <set field="updateDivSequenceXmlCtx.description" from-field="descriptionValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="styleKey"/>
            <clear-field field="styleValue"/>
            <iterate-map key="styleKey" value="styleValue" map="parameters.styles">
                <if-compare-field field="entryKey" to-field="styleKey" operator="equals">
					<if-not-empty field="parameters.mode">
						<if-compare field="parameters.mode" operator="equals" value="add">
							<if-not-empty field="parameters.key">
								<if-compare-field field="parameters.key" operator="equals" to-field="keyValue">
									<set field="addDivSequenceItemXmlCtx.style" from-field="styleValue"/>
								</if-compare-field>
							</if-not-empty>
						</if-compare>
					</if-not-empty>
                    <set field="updateDivSequenceXmlCtx.style" from-field="styleValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="mandatoryKey"/>
            <clear-field field="mandatoryValue"/>
            <iterate-map key="mandatoryKey" value="mandatoryValue" map="parameters.mandatorys">
                <if-compare-field field="entryKey" to-field="mandatoryKey" operator="equals">
					<if-not-empty field="parameters.mode">
						<if-compare field="parameters.mode" operator="equals" value="add">
							<if-not-empty field="parameters.key">
								<if-compare-field field="parameters.key" operator="equals" to-field="keyValue">
									<set field="addDivSequenceItemXmlCtx.mandatory" from-field="mandatoryValue"/>
								</if-compare-field>
							</if-not-empty>
						</if-compare>
					</if-not-empty>
                    <set field="updateDivSequenceXmlCtx.mandatory" from-field="mandatoryValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="groupNumKey"/>
            <clear-field field="groupNumValue"/>
            <iterate-map key="groupNumKey" value="groupNumValue" map="parameters.groups">
                <if-compare-field field="entryKey" to-field="groupNumKey" operator="equals">
                	<if-empty field="groupNumValue">
                        <set field="groupNumValue" value="0" type="String"/>
                    </if-empty>
					<if-not-empty field="parameters.mode">
						<if-compare field="parameters.mode" operator="equals" value="add">
							<if-not-empty field="parameters.key">
								<if-compare-field field="parameters.key" operator="equals" to-field="keyValue">
									<set field="addDivSequenceItemXmlCtx.group" from-field="groupNumValue"/>
								</if-compare-field>
							</if-not-empty>
						</if-compare>
					</if-not-empty>
                    <set field="updateDivSequenceXmlCtx.group" from-field="groupNumValue"/>
                </if-compare-field>
            </iterate-map>
			<if-not-empty field="parameters.mode">
				<if-compare field="parameters.mode" operator="equals" value="add">
					<if-not-empty field="parameters.key">
						<if-compare-field field="parameters.key" operator="equals" to-field="keyValue">
							<set field="addDivSequenceItemXmlCtx.key" from-field="parameters.key"/>
							<call-service service-name="addDivSeqItemXml" in-map-name="addDivSequenceItemXmlCtx"/>
						</if-compare-field>
					</if-not-empty>
				</if-compare>
			</if-not-empty>
            <call-service service-name="updateDivSequenceXml" in-map-name="updateDivSequenceXmlCtx"/>
        </iterate-map>
        
        <if-not-empty field="parameters.key">
        	<set field="editDivSeqKey" from-field="parameters.key"/>
	        <property-to-field resource="OSafeAdminUiLabels" property="DivSequenceItemSuccess" field="divSequenceItemSuccessMessage"/>
	        <string-to-list string="${divSequenceItemSuccessMessage}" list="successMessageList"/>
        <else>
        	<set field="editDivSeq" from-field="parameters.screenType"/>
	        <property-to-field resource="OSafeAdminUiLabels" property="DivSequenceSuccess" field="divSequenceSuccessMessage"/>
	        <string-to-list string="${divSequenceSuccessMessage}" list="successMessageList"/>
        </else>
        </if-not-empty>
        
     </simple-method>
    
    
    <simple-method method-name="updateCompareDivSequence" short-description="Updates a Compare div Sequence">
    	<!-- check if we are using grouping -->
    	<set field="useGrouping" value="N"/>
    	<set field="group" from-field="parameters.group"/>
    	
       	<if-compare field="useGrouping" operator="equals" value="N">
            <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="isGroupNumVaild">
                <field field="group" type="String" />
            </call-class-method>
            <if-empty field="group">
                <set field="isGroupNumVaild" value="false"/>
            </if-empty>
            <if-compare operator="equals" value="true" field="isGroupNumVaild" type="Boolean">
                <if>
                   	<condition>
                        <and>
                            <if-compare operator="greater-equals" value="1" field="group" type="Long"/>
                            <if-compare operator="less-equals" value="10" field="group" type="Long"/>
                        </and>
                    </condition>
                    <then>
                    	<set field="useGrouping" value="Y"/>
                    </then>
                </if>
            </if-compare>
        </if-compare>
		
		<if-not-empty field="parameters.mode">
			<if-compare field="parameters.mode" operator="equals" value="add">
				<if-empty field="parameters.key">
					<property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankDivSeqKeyError"/>
					<string-to-list string="${tempErrorMessage}" message-field="style" list="error_list"/>
				<else>
				    <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
			            <field field="parameters.key"/>
			        </call-class-method>
			        <if-compare field="isValidId" operator="equals" value="false">
			            <set field="errorKey" from-field="parameters.key"/>
			            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
			            <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
			        <else>
			            <set field="spaceReplacement" value=" " type="String"/>
			            <set field="makeUpCase" value="false" type="Boolean"/>
			            <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="parameters.key">
			                <field field="parameters.key" type="String"/>
			                <string value="${spaceReplacement}"/>
			                <field field="makeUpCase" type="boolean"/>
			            </call-class-method>
			            <if-empty field="parameters.key">
			                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidKeyError"/>
			                <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
			            <else>
			                <call-class-method class-name="org.ofbiz.base.util.UtilProperties" method-name="getPropertyValue" ret-field="XmlFileStr">
			                    <string value="osafeAdmin.properties"/>
			                    <string value="osafe-uiSequence-xml-file"/>
			                </call-class-method>
			                <set field="XmlFilePath" value="${groovy: org.ofbiz.base.util.string.FlexibleStringExpander.expandString(XmlFileStr, context)}" type="String"/>
			                <call-class-method class-name="com.osafe.services.OsafeManageXml" method-name="getListMapsFromXmlFile" ret-field="listMaps">
			                    <field field="XmlFilePath" type="String"/>
			                </call-class-method>
			                <call-class-method class-name="com.osafe.services.OsafeManageXml" method-name="findByKeyAndScreenFromListMaps" ret-field="uiDivEntry">
			                    <field field="listMaps" type="java.util.List"/>
			                    <string value="key"/>
			                    <field field="parameters.key" type="String"/>
			                    <string value="screen"/>
			                    <field field="parameters.screenType" type="String"/>
			                </call-class-method>
			                <if-not-empty field="uiDivEntry">
			                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="divSeqItemExistError"/>
			                    <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
			                </if-not-empty>
			            </else>
			            </if-empty>
			        </else>
			        </if-compare>
			    </else>
				</if-empty>
			</if-compare>
		</if-not-empty>
        
        
        <set field="invalidSeqNum" value="false"/>
        <set field="sequenceNumValue" from-field="parameters.value"/>
        <if-empty field="sequenceNumValue">
            <set field="sequenceNumValue" value="0"/>
			<if-not-empty field="parameters.mode">
			    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankSeqNumError"/>
				<string-to-list string="${tempErrorMessage}" message-field="style" list="error_list"/>
		    </if-not-empty>
        </if-empty>
        
        <set field="isMandatorySeq" value="N"/>
        <set field="mandatoryValue" from-field="parameters.mandatory"/>
		<if-not-empty field="mandatoryValue">
		    <if-compare field="mandatoryValue" operator="equals" value="SYS_YES">
			    <set field="isMandatorySeq" value="Y"/>
			</if-compare>
		</if-not-empty>
				
				
        <if-not-empty field="sequenceNumValue">
            <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                <string value="${sequenceNumValue}"></string>
            </call-class-method>
            <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                <set field="invalidSeqNum" value="true"/>
            <else>
                <if>
                    <condition>
                        <and>
                            <if-compare operator="greater-equals" value="0" field="sequenceNumValue" type="Long"/>
                            <if-compare operator="less-equals" value="9000" field="sequenceNumValue" type="Long"/>
                        </and>
                    </condition>
                <then>
                    <!-- check the group validation -->
                    <set field="groupNumValue" from-field="parameters.group"/>
                    <if-empty field="groupNumValue">
                        <set field="groupNumValue" value="0"/>
                    </if-empty>
                    <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="isGroupNumVaild">
                        <field field="groupNumValue" type="String" />
                    </call-class-method>
                    <if-compare operator="equals" value="true" field="isGroupNumVaild" type="Boolean">
                        <if-compare operator="greater-equals" value="1" field="sequenceNumValue" type="Long">
	                        <if>
	                            <condition>
	                                <and>
	                                    <if-compare operator="greater-equals" value="1" field="groupNumValue" type="Long"/>
	                                    <if-compare operator="less-equals" value="10" field="groupNumValue" type="Long"/>
	                                </and>
	                            </condition>
	                            <then></then>
	                        <else>
	                            <!-- <set field="isGroupNumVaild" value="false"/> -->
	                            <if>
								    <condition>
									    <or>
										    <if-compare operator="less" value="0" field="groupNumValue" type="Long"/>
										    <if-compare operator="greater" value="10" field="groupNumValue" type="Long"/>
										</or>
									</condition>
								<then>
								    <set field="keyValue" from-field="parameters.key"/>
						            <clear-field field="argListNames"/>
						            <set field="argListNames[]" from-field="keyValue"/>
						            <property-to-field resource="OSafeAdminUiLabels" property="ValidGroupNumberError" field="tempErrorMessage" arg-list-name="argListNames"/>
						            <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
						            <set field="parameters.showDetail" value="true"/>
								</then>
								<else>
								    <if-compare field="useGrouping" operator="equals" value="Y">
									    <if-compare operator="equals" value="0" field="groupNumValue" type="Long">
									        <set field="keyValue" from-field="parameters.key"/>
								            <clear-field field="argListNames"/>
								            <set field="argListNames[]" from-field="keyValue"/>
								            <property-to-field resource="OSafeAdminUiLabels" property="GroupNumRequiredError" field="tempErrorMessage" arg-list-name="argListNames"/>
								            <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
								            <set field="parameters.showDetail" value="true"/>
										</if-compare>
									</if-compare>
								</else>
								</if>
	                        </else>
	                        </if>
                        <else>
                            <if-compare operator="equals" value="Y" field="isMandatorySeq">
                                <set field="keyValue" from-field="parameters.key"/>
		                        <clear-field field="argListNames"/>
		                        <set field="argListNames[]" from-field="keyValue"/>
		                        <property-to-field resource="OSafeAdminUiLabels" property="MandatorySeqNumRequiredError" field="tempErrorMessage" arg-list-name="argListNames"/>
		                        <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
		                        <set field="parameters.showDetail" value="true"/>
		                    <else>
				                <if-compare operator="greater" value="0" field="groupNumValue">
				                    <set field="keyValue" from-field="parameters.key"/>
			                        <clear-field field="argListNames"/>
			                        <set field="argListNames[]" from-field="keyValue"/>
			                        <property-to-field resource="OSafeAdminUiLabels" property="SeqNumRequiredError" field="tempErrorMessage" arg-list-name="argListNames"/>
			                        <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
			                        <set field="parameters.showDetail" value="true"/>
				                </if-compare>
				            </else>
			                </if-compare>
			            </else>
                        </if-compare>
                    <else>
                         <if-compare operator="equals" value="false" field="isGroupNumVaild" type="Boolean">
		                     <set field="keyValue" from-field="parameters.key"/>
		                     <clear-field field="argListNames"/>
		                     <set field="argListNames[]" from-field="keyValue"/>
		                     <property-to-field resource="OSafeAdminUiLabels" property="ValidGroupNumberError" field="tempErrorMessage" arg-list-name="argListNames"/>
		                     <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
		                     <set field="parameters.showDetail" value="true"/>
		                 </if-compare>
                     </else>
                     </if-compare>
                                   
					 <if-not-empty field="parameters.mode">
						 <set field="styleValue" from-field="parameters.style"/>
						 <if-empty field="styleValue">
						     <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankStyleError"/>
						     <string-to-list string="${tempErrorMessage}" message-field="style" list="error_list"/>
						 <else>
						     <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidDesc" ret-field="isValidDesc">
							     <field field="styleValue"/>
							 </call-class-method>
							 <if-compare field="isValidDesc" operator="equals" value="false">
							     <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidStyleError"/>
								 <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
							 </if-compare>
						 </else>
						 </if-empty>
					 
					     <set field="descriptionValue" from-field="parameters.description"/>
						 <if-empty field="descriptionValue">
						     <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidDescriptionError"/>
							 <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
						 </if-empty>
					 </if-not-empty>
                 </then>
                 <else>
                     <set field="invalidSeqNum" value="true"/>
                 </else>
                 </if>
             </else>
             </if-compare>
         </if-not-empty>
         <if-compare field="invalidSeqNum" type="Boolean" operator="equals" value="true" >
	         <if-compare operator="equals" value="Y" field="isMandatorySeq">
		         <set field="keyValue" from-field="parameters.key"/>
				 <clear-field field="argListNames"/>
				 <set field="argListNames[]" from-field="keyValue"/>
				 <property-to-field resource="OSafeAdminUiLabels" property="MandatorySeqNumRequiredError" field="tempErrorMessage" arg-list-name="argListNames"/>
				 <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
				 <set field="parameters.showDetail" value="true"/>
	      	 <else>
		         <set field="keyValue" from-field="parameters.key"/>
		         <clear-field field="argListNames"/>
		         <set field="argListNames[]" from-field="keyValue"/>
		         <property-to-field resource="OSafeAdminUiLabels" property="DivSequencerInvalidSequenceNumber" field="tempErrorMessage" arg-list-name="argListNames"/>
		         <string-to-list string="${tempErrorMessage}" message-field="groups" list="error_list"/>
		         <set field="parameters.showDetail" value="true"/>
			 </else>
			 </if-compare>
		</if-compare>  
		                  
        <field-to-result field="parameters.showDetail" result-name="showDetail"/>
        <if-not-empty field="parameters.key">
        	<field-to-result field="parameters.key" result-name="key"/>
        </if-not-empty>
        <field-to-result field="parameters.screenType" result-name="screenType"/>
        <check-errors/>
        
        <if-not-empty field="parameters.mode">
        	<set field="showDetail" value="true"/>
        	<field-to-result field="showDetail"/>
        </if-not-empty>
        
        <set field="keyValue" from-field="parameters.key"/>
        <set field="sequenceNumValue" from-field="parameters.value"/>
        <set field="updateDivSequenceXmlCtx.key" from-field="keyValue"/>
            
        <if-empty field="sequenceNumValue">
            <set field="sequenceNumValue" value="0" type="String"/>
        </if-empty>
		<if-not-empty field="parameters.mode">
		    <if-compare field="parameters.mode" operator="equals" value="add">
			    <set field="addDivSequenceItemXmlCtx.value" from-field="sequenceNumValue"/>
			</if-compare>
		</if-not-empty>
        <set field="updateDivSequenceXmlCtx.value" from-field="sequenceNumValue"/>
        
        <set field="screenValue" from-field="parameters.screen"/>        
		<if-not-empty field="parameters.mode">
		    <if-compare field="parameters.mode" operator="equals" value="add">
			    <set field="addDivSequenceItemXmlCtx.screen" from-field="screenValue"/>
			</if-compare>
		</if-not-empty>
        <set field="updateDivSequenceXmlCtx.screen" from-field="screenValue"/>
                
        <set field="descriptionValue" from-field="parameters.description"/>
        <if-not-empty field="parameters.mode">
		    <if-compare field="parameters.mode" operator="equals" value="add">
			    <set field="addDivSequenceItemXmlCtx.description" from-field="descriptionValue"/>
			</if-compare>
		</if-not-empty>
		<set field="updateDivSequenceXmlCtx.description" from-field="descriptionValue"/>
		
        <set field="styleValue" from-field="parameters.style"/>
        <if-not-empty field="parameters.mode">
		    <if-compare field="parameters.mode" operator="equals" value="add">
			    <set field="addDivSequenceItemXmlCtx.style" from-field="styleValue"/>
			</if-compare>
		</if-not-empty>
		<set field="updateDivSequenceXmlCtx.style" from-field="styleValue"/>
					
        <set field="mandatoryValue" from-field="parameters.mandatory"/>
		<if-not-empty field="parameters.mode">
		    <if-compare field="parameters.mode" operator="equals" value="add">
			    <set field="addDivSequenceItemXmlCtx.mandatory" from-field="mandatoryValue"/>
			</if-compare>
		</if-not-empty>
        <set field="updateDivSequenceXmlCtx.mandatory" from-field="mandatoryValue"/>
            
        <set field="groupNumValue" from-field="parameters.group"/>    
        <if-empty field="groupNumValue">
            <set field="groupNumValue" value="0" type="String"/>
        </if-empty>
		<if-not-empty field="parameters.mode">
		    <if-compare field="parameters.mode" operator="equals" value="add">
			    <set field="addDivSequenceItemXmlCtx.group" from-field="groupNumValue"/>
			</if-compare>
		</if-not-empty>
        <set field="updateDivSequenceXmlCtx.group" from-field="groupNumValue"/>
        
		<if-not-empty field="parameters.mode">
		    <if-compare field="parameters.mode" operator="equals" value="add">
			    <set field="addDivSequenceItemXmlCtx.key" from-field="parameters.key"/>
				<call-service service-name="addDivSeqItemXml" in-map-name="addDivSequenceItemXmlCtx"/>
			</if-compare>
		</if-not-empty>
        <call-service service-name="updateDivSequenceXml" in-map-name="updateDivSequenceXmlCtx"/>
        
        <if-not-empty field="parameters.key">
        	<set field="editDivSeqKey" from-field="parameters.key"/>
	        <property-to-field resource="OSafeAdminUiLabels" property="DivSequenceItemSuccess" field="divSequenceItemSuccessMessage"/>
	        <string-to-list string="${divSequenceItemSuccessMessage}" list="successMessageList"/>
        <else>
        	<set field="editDivSeq" from-field="parameters.screenType"/>
	        <property-to-field resource="OSafeAdminUiLabels" property="DivSequenceSuccess" field="divSequenceSuccessMessage"/>
	        <string-to-list string="${divSequenceSuccessMessage}" list="successMessageList"/>
        </else>
        </if-not-empty>
        
     </simple-method>
    
    <simple-method method-name="updateImageLocationPreferences" short-description="Update Image Location Preferences">
        <iterate-map key="key" value="keyValue" map="parameters.key">
            <set field="modifyImageLocationPreferencesXmlCtx.key" from-field="keyValue"/>
            <iterate-map key="imageLocationKey" value="imageLocationValue" map="parameters.imageLocation">
                <if-compare-field field="imageLocationKey" to-field="key" operator="equals">
                    <set field="modifyImageLocationPreferencesXmlCtx.value" from-field="imageLocationValue"/>
                </if-compare-field>
            </iterate-map>
            <call-service service-name="modifyImageLocationPreferencesXml" in-map-name="modifyImageLocationPreferencesXmlCtx"/>
        </iterate-map>
        <property-to-field resource="OSafeAdminUiLabels" property="ImageLocationPreferencesSuccess" field="imageLocationPreferencesSuccessMessage"/>
        <string-to-list string="${imageLocationPreferencesSuccessMessage}" list="successMessageList"/>
     </simple-method>

    <simple-method method-name="createPixelTracking" short-description="Create Pixel Tracking">
    	        
        <if-empty field="parameters.pixelId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankPixelIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="pixelId" list="error_list"/>
            <else>
                <set field="idLength" value="20" type="Integer"/>
                <set field="spaceReplacement" value=" " type="String"/>
                <set field="makeUpCase" value="true" type="Boolean"/>
                <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="pixId">
                    <field field="parameters.pixelId" type="String"/>
                    <field field="idLength" type="Integer"/>
                    <field field="spaceReplacement" type="String"/>
                    <field field="makeUpCase" type="boolean"/>
                </call-class-method>
                <if-empty field="pixId">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PixelIdLengthError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="pixelId" list="error_list"/>
                    <else>
                    	<call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
                            <field field="parameters.pixelId"/>
                        </call-class-method>
                        <if-compare field="isValidId" operator="equals" value="true">
                        	<set from-field="parameters.pixelId" field="xPixelTrackingLookUp.pixelId"/>
                        	<set from-field="parameters.productStoreId" field="xPixelTrackingLookUp.productStoreId"/>
            				<find-by-primary-key entity-name="XPixelTracking" map="xPixelTrackingLookUp" value-field="lookedUpValue"/>
	                        <if-not-empty field="lookedUpValue">
	                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PixelIdExistError"/>
	                            <string-to-list string="${tempErrorMessage}" message-field="pixelId" list="error_list"/>
	                            <else>
	                                <set field="parameters.pixelId" from-field="pixId"/> 
	                            </else>
	                        </if-not-empty>
                        <else>
                            <set field="errorKey" from-field="parameters.pixelId"/>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
                            <string-to-list string="${tempErrorMessage}"  message-field="pixelId" list="error_list"/>
                        </else>
                        </if-compare>
                    </else>
                </if-empty>            
            </else>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankPixelDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.pixelScope">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankPixelScopeError"/>
            <string-to-list string="${tempErrorMessage}" message-field="pixelScope" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.pixelPagePosition">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankPixelPagePostionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="pixelPagePosition" list="error_list"/>
        </if-empty>
        <set field="sequenceNumValue" from-field="parameters.pixelSequenceNum"/>
        <call-simple-method method-name="validateSequenceNumber" xml-resource="component://osafeadmin/script/com/osafeadmin/events/OsafeAdminValidationEvents.xml"/>
        <if>
            <condition>
                <or>
                    <if-compare operator="equals" value="true" field="invalidSeqNum" type="Boolean"/>
                    <if-compare operator="equals" value="true" field="invalidSeqNumRange" type="Boolean"/>
                </or>
            </condition>
            <then>
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="InvalidSequenceNumber"/>
                <string-to-list string="${tempErrorMessage}" message-field="pixelSequenceNum" list="error_list"/>
            </then>
        </if>

        <if-empty field="parameters.textData">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankPixelCodeError"/>
            <string-to-list string="${tempErrorMessage}" message-field="textData" list="error_list"/>
        </if-empty>
        <check-errors/>

        <set field="createTextContentCtx.dataResourceTypeId" value="ELECTRONIC_TEXT"/>
        <set field="createTextContentCtx.dataTemplateTypeId" value="FTL"/>
        <set field="createTextContentCtx.contentTypeId" value="DOCUMENT"/>
        <set field="createTextContentCtx.contentPurposeTypeId" value="SECTION"/>
        <set field="createTextContentCtx.textData" from-field="parameters.textData"/>
        <set field="createTextContentCtx.statusId" from-field="parameters.statusId"/>
        <set field="createTextContentCtx.contentName" from-field="parameters.pixelId"/>
        
        <call-service service-name="createTextContent" in-map-name="createTextContentCtx">
            <result-to-field field="parameters.contentId" result-name="contentId"/>
        </call-service>

        <make-value entity-name="XPixelTracking" value-field="newEntity"/>
        <set-pk-fields map="parameters" value-field="newEntity"/>
        <set-nonpk-fields map="parameters" value-field="newEntity"/>
        <set field="newEntity.contentId" from-field="parameters.contentId"/>
        <set field="newEntity.pixelSequenceNum" from-field="parameters.pixelSequenceNum" type="Long"/>
        <create-value value-field="newEntity"/>

        <field-to-result field="newEntity.pixelId" result-name="pixelId"/>
        <field-to-result field="newEntity.productStoreId" result-name="productStoreId"/>
        
        <set field="editPixelId" from-field="parameters.pixelId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="EditPixelTrackingSuccess" field="editPixelTrackingSuccessMessage"/>
        <string-to-list string="${editPixelTrackingSuccessMessage}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="updatePixelTracking" short-description="Update Pixel Tracking">
    	
        <if-empty field="parameters.pixelId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankPixelIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="pixelId" list="error_list"/>
            <else>
                <set from-field="parameters.pixelId" field="xPixelTrackingLookUp.pixelId"/>
                <set from-field="parameters.productStoreId" field="xPixelTrackingLookUp.productStoreId"/>
            	<find-by-primary-key entity-name="XPixelTracking" map="xPixelTrackingLookUp" value-field="lookedUpValue"/>
                <if-empty field="lookedUpValue">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PixelIdNotExistError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="pixelId" list="error_list"/>
                </if-empty>
          </else>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankPixelDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.pixelScope">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankPixelScopeError"/>
            <string-to-list string="${tempErrorMessage}" message-field="pixelScope" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.pixelPagePosition">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankPixelPagePostionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="pixelPagePosition" list="error_list"/>
        </if-empty>
        <set field="sequenceNumValue" from-field="parameters.pixelSequenceNum"/>
        <call-simple-method method-name="validateSequenceNumber" xml-resource="component://osafeadmin/script/com/osafeadmin/events/OsafeAdminValidationEvents.xml"/>
        <if>
            <condition>
                <or>
                    <if-compare operator="equals" value="true" field="invalidSeqNum" type="Boolean"/>
                    <if-compare operator="equals" value="true" field="invalidSeqNumRange" type="Boolean"/>
                </or>
            </condition>
            <then>
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="InvalidSequenceNumber"/>
                <string-to-list string="${tempErrorMessage}" message-field="pixelSequenceNum" list="error_list"/>
            </then>
        </if>

        
        <if-empty field="parameters.textData">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankPixelCodeError"/>
            <string-to-list string="${tempErrorMessage}" message-field="textData" list="error_list"/>
        </if-empty>
        <check-errors/>

        <set-service-fields service-name="updateTextContent" map="parameters" to-map="updateTextContentCtx"/>
        <set field="updateTextContentCtx.contentName" from-field="parameters.pixelId"/>
        <set field="updateTextContentCtx.textData" from-field="parameters.pixelCode"/>
        <set field="updateTextContentCtx.contentId" from-field="parameters.contentId"/>
        <call-service service-name="updateTextContent" in-map-name="updateTextContentCtx">
            <result-to-field field="parameters.contentId" result-name="contentId"/>
        </call-service>

        <set-service-fields service-name="updateXPixelTracking" map="parameters" to-map="updateXPixelTrackingCtx"/>
        <set field="updateXPixelTrackingCtx.contentId" from-field="parameters.contentId"/>
        <call-service service-name="updateXPixelTracking" in-map-name="updateXPixelTrackingCtx">
            <result-to-result result-name="pixelId"/>
            <result-to-result result-name="productStoreId"/>
        </call-service>
        
        <set field="editPixelId" from-field="parameters.pixelId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="EditPixelTrackingSuccess" field="editPixelTrackingSuccessMessage"/>
        <string-to-list string="${editPixelTrackingSuccessMessage}" list="successMessageList"/>
    </simple-method>
    
    <simple-method method-name="deletePixelTracking" short-description="delete Pixel Tracking">
        <if-empty field="parameters.pixelId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankPixelIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="pixelId" list="error_list"/>
            <else>
                <entity-one entity-name="XPixelTracking" value-field="lookedUpValue"/>
                <if-empty field="lookedUpValue">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="PixelIdNotExistError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="pixelId" list="error_list"/>
                </if-empty>
            </else>
        </if-empty>
        <check-errors/>
        <set field="contentId" from-field="lookedUpValue.contentId"/>
        <remove-value value-field="lookedUpValue"/>
        <if-not-empty field="contentId">
            <set field="deleteTextContentCtx.contentId" from-field="contentId"/>
            <call-service service-name="deleteTextContent" in-map-name="deleteTextContentCtx"/>
        </if-not-empty>
    </simple-method>

    <simple-method method-name="updatePaymentSetting" short-description="update Payment Setting">
        <if>
            <condition>
                <and>
                    <not><if-empty field="parameters.paymentService"/></not>
                    <not><if-empty field="parameters.paymentCustomMethodId"/></not>
                </and>
            </condition>
            <then>
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="OnlyOnePayementMethodError"/>
                <string-to-list string="${tempErrorMessage}" message-field="paymentService" list="error_list"/>
            </then>
        </if>
        <check-errors/>
        <set-service-fields service-name="updateProductStorePaymentSetting" map="parameters" to-map="updateProductStorePaymentSettingCtx"/>
        <call-service service-name="updateProductStorePaymentSetting" in-map-name="updateProductStorePaymentSettingCtx" />
        <property-to-field resource="OSafeAdminUiLabels" property="PaymentSettingSavedSuccess" field="paymentSettingSavedSuccess"/>
        <string-to-list string="${paymentSettingSavedSuccess}" list="successMessageList"/>
    </simple-method>
    
    <simple-method method-name="createUpdateDownloadedArrtibute" short-description="Create or Update the Downloaded Attribute">
        
        <if-not-empty field="parameters.feedsExportedIdList">
            <iterate entry="exportedId" list="parameters.feedsExportedIdList">
                <set field="entityName" from-field="parameters.entityName" />
                <set field="entityPrimaryColumnName" from-field="parameters.entityPrimaryColumnName" />
                
                <call-bsh><![CDATA[
                    List attributeList = javolution.util.FastList.newInstance();
                    attributeList = delegator.findByAnd(entityName, org.ofbiz.base.util.UtilMisc.toMap(entityPrimaryColumnName, exportedId));
                    parameters.put("attributeList", attributeList);
                ]]></call-bsh>
                <set field="attributeList" from-field="parameters.attributeList"/>
                
                <set field="attributeFilter.attrName" value="IS_DOWNLOADED"/>
                <filter-list-by-and list="attributeList" map="attributeFilter" to-list="attributeIsDownloadList"/>
                <clear-field field="attributeFilter.attrName"/>
                
                <!-- Create or Update the IS_DOWNLOADED attribute -->
                <make-value entity-name="${entityName}" value-field="lookedUpValue"/>
                <set field="lookedUpValue.${entityPrimaryColumnName}" from-field="exportedId"/>
                <set field="lookedUpValue.attrName" value="IS_DOWNLOADED"/>
                <set field="lookedUpValue.attrValue" value="Y"/>
                
                <if-not-empty field="attributeIsDownloadList">
                    <store-value value-field="lookedUpValue"/>
                <else>
                    <create-value value-field="lookedUpValue"/>
                </else>
                </if-not-empty>
                
                <set field="attributeFilter.attrName" value="DATETIME_DOWNLOADED"/>
                <filter-list-by-and list="attributeList" map="attributeFilter" to-list="attributeDateTimeDownloadList"/>
                <clear-field field="attributeFilter.attrName"/>
                
                <!-- Create or Update the DATETIME_DOWNLOADED attribute -->
                <now-timestamp field="nowStamp"/>                
                <make-value entity-name="${entityName}" value-field="lookedUpValue"/>
                <set field="lookedUpValue.${entityPrimaryColumnName}" from-field="exportedId"/>
                <set field="lookedUpValue.attrName" value="DATETIME_DOWNLOADED"/>
                <set field="lookedUpValue.attrValue" from-field="nowStamp" type="String"/>
                
                <if-not-empty field="attributeDateTimeDownloadList">
                    <store-value value-field="lookedUpValue"/>
                <else>
                    <create-value value-field="lookedUpValue"/>
                </else>
                </if-not-empty>
            </iterate>
        </if-not-empty>
    </simple-method>
    <simple-method method-name="pushEntitySync" short-description="Performs Entity Sync push">
        <if-not-empty field="parameters.entitySyncId">
        <set-service-fields service-name="runEntitySync" to-map="runEntitySyncCtx" map="parameters"/>
            <call-service service-name="runEntitySync" in-map-name="runEntitySyncCtx">
            
            </call-service>
        <else>    
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="UnsuccessfulEntitySyncError"/>
            <string-to-list string="${tempErrorMessage}" message-field="entitySyncId" list="error_list"/>
        </else>
        </if-not-empty>
        <set field="entitySyncHistoryMap.entitySyncId" from-field="parameters.entitySyncId" />
        <entity-condition list="entitySyncHistoryList" entity-name="EntitySyncHistory">
            <condition-expr field-name="entitySyncId" operator="equals" from-field="parameters.entitySyncId"/>
            <order-by field-name="-createdStamp"/>
        </entity-condition>
        
        <call-class-method class-name="org.ofbiz.entity.util.EntityUtil" method-name="getFirst" ret-field="entitySyncHistory">
            <field field="entitySyncHistoryList" type="List"/>
        </call-class-method>
        <if-not-empty field="entitySyncHistory">
            <set field="toCreate" from-field="entitySyncHistory.totalRowsToCreate" />
            <set field="toStore" from-field="entitySyncHistory.totalRowsToStore" />
            <set field="toDelete" from-field="entitySyncHistory.totalRowsToRemove" />
        </if-not-empty>
        <set field="argListNames[]" from-field="toCreate"/>
        <set field="argListNames[]" from-field="toStore"/>
        <set field="argListNames[]" from-field="toDelete"/>
        <property-to-field resource="OSafeAdminUiLabels" property="EntitySyncSuccess" field="entitySyncSuccessMessage" arg-list-name="argListNames"/>
        <string-to-list string="${entitySyncSuccessMessage}" list="successMessageList"/>
    </simple-method>
    
    <simple-method method-name="createCustomPartyAttributeItem" short-description="create Missing Div">
        <if-empty field="parameters.attrName">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankAttrNameError"/>
            <string-to-list string="${tempErrorMessage}" message-field="attrName" list="error_list"/>
        <else>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
                <field field="parameters.attrName"/>
            </call-class-method>
            <if-compare field="isValidId" operator="equals" value="false">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="InvalidAttrNameError"/>
                <string-to-list string="${tempErrorMessage}" message-field="attrName" list="error_list"/>
            </if-compare>
        </else>
        </if-empty>
        
        <set field="invalidSeqNum" value="false"/>
        <set field="invalidSeqNumRange" value="false"/>
        <set field="sequenceValueGreaterThan" value="0" type="Long"/>
        <set field="sequenceNumValue" from-field="parameters.sequenceNum"/>
        <if-not-empty field="sequenceNumValue">
            <call-simple-method method-name="validateSequenceNumber" xml-resource="component://osafeadmin/script/com/osafeadmin/events/OsafeAdminValidationEvents.xml"/>
        </if-not-empty>
        <if>
            <condition>
                <or>
                    <if-compare operator="equals" value="true" field="invalidSeqNum" type="Boolean"/>
                    <if-compare operator="equals" value="true" field="invalidSeqNumRange" type="Boolean"/>
                </or>
            </condition>
            <then>
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="AttributeSequenceNumNotValidError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceNum" list="error_list"/>
            </then>
        </if>

        <if-empty field="parameters.caption">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankCaptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="caption" list="error_list"/>
        </if-empty>
        
        <if-not-empty field="parameters.type">
            <if>
                <condition>
                    <or>
	                    <if-compare operator="equals" value="ENTRY" field="parameters.type"/>
	                    <if-compare operator="equals" value="ENTRY_BOX" field="parameters.type"/>
                    </or>
                </condition>
                <then>
                    <set field="maxLengthValue" from-field="parameters.maxLength"/>
			        <set field="invalidMaxLength" value="false"/>
			        <if-not-empty field="maxLengthValue">
			            <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="maxLengthVaild">
			                <string value="${maxLengthValue}"></string>
			            </call-class-method>
			            <if-compare operator="equals" value="false" field="maxLengthVaild" type="Boolean">
			                <set field="invalidMaxLength" value="true"/>
			            <else>
			                <if-compare operator="less-equals" value="0" field="maxLengthValue" type="Long">
			                    <set field="invalidMaxLength" value="true"/>
			                </if-compare>
			            </else>
			            </if-compare>
			        <else>
			            <set field="invalidMaxLength" value="true"/>
			        </else>
			        </if-not-empty>
                    <if-compare field="invalidMaxLength" operator="equals" value="true">
                        <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="InvalidMaxLengthError"/>
            			<string-to-list string="${tempErrorMessage}" message-field="maxLength" list="error_list"/>
                    </if-compare>
                </then>
            </if>
        </if-not-empty>
        <if-not-empty field="parameters.type">
            <if>
                <condition>
                    <or>
	                    <if-compare operator="equals" value="RADIO_BUTTON" field="parameters.type"/>
	                    <if-compare operator="equals" value="CHECKBOX" field="parameters.type"/>
	                    <if-compare operator="equals" value="DROP_DOWN" field="parameters.type"/>
	                    <if-compare operator="equals" value="DROP_DOWN_MULTI" field="parameters.type"/>
                    </or>
                </condition>
                <then>
                    <if-empty field="parameters.valueList">
                        <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankValueListError"/>
            			<string-to-list string="${tempErrorMessage}" message-field="valueList" list="error_list"/>
                    </if-empty>
                </then>
            </if>
        </if-not-empty>
        
        <if-not-empty field="parameters.mandatory">
            <if-compare operator="equals" value="Y" field="parameters.mandatory">
                <if-empty field="parameters.reqMessage">
	                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankRequiredMessageError"/>
	            	<string-to-list string="${tempErrorMessage}" message-field="reqMessage" list="error_list"/>
                </if-empty>
            </if-compare>
        </if-not-empty>
        
        <check-errors/>
        
        <set-service-fields service-name="addCustomPartyAttributeItemXml" map="parameters" to-map="addCustomPartyAttributeItemXmlCtx"/>
        <call-service service-name="addCustomPartyAttributeItemXml" in-map-name="addCustomPartyAttributeItemXmlCtx"/>
        
        
        <set field="getPartyCustomAttributeListCtx" type="NewMap"/>
        <set field="getPartyCustomAttributeListCtx.useCache" value="false" type="String"/>
        <call-service service-name="getPartyCustomAttributeList" in-map-name="getPartyCustomAttributeListCtx">
            <result-to-field result-name="customPartyAttributeList" field="customPartyAttributeList"/>
        </call-service>
        
        <iterate entry="customPartyAttributeMap" list="customPartyAttributeList">
           <set field="customPartyAttributeSeqMap.${customPartyAttributeMap.AttrName}" value="${customPartyAttributeMap.SequenceNum}"/>
        </iterate>
        
        <set field="seqMultiple" value="10" type="Integer"/>
        <call-class-method method-name="setSequenceMapByMultiple" class-name="com.osafe.util.OsafeAdminUtil" ret-field="customPartyAttributeSeqMap">
            <field field="customPartyAttributeSeqMap" type="java.util.Map"/>
            <field field="seqMultiple" type="Integer"/>
        </call-class-method>
            
        <iterate entry="customPartyAttributeMap" list="customPartyAttributeList">
            <set field="seqNum" from-field="customPartyAttributeSeqMap.${customPartyAttributeMap.AttrName}"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.attrName" from-field="customPartyAttributeMap.AttrName"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.caption" from-field="customPartyAttributeMap.Caption"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.type" from-field="customPartyAttributeMap.Type"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.entryFormat" from-field="customPartyAttributeMap.EntryFormat"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.maxLength" from-field="customPartyAttributeMap.MaxLength"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.valueList" from-field="customPartyAttributeMap.ValueList"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.mandatory" from-field="customPartyAttributeMap.Mandatory"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.reqMessage" from-field="customPartyAttributeMap.ReqMessage"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.sequenceNum" from-field="seqNum" type="Long"/>
            <call-service service-name="updateCustomPartyAttributeItemXml" in-map-name="updateCustomPartyAttributeItemXmlCtx"/>
	    </iterate>
        
        <property-to-field resource="OSafeAdminUiLabels" property="CustomPartyAttributeSuccess" field="customPartyAttributeSuccessMessage"/>
        <string-to-list string="${customPartyAttributeSuccessMessage}" list="successMessageList"/>
    </simple-method>
    
    <simple-method method-name="updateCustomPartyAttributeItem" short-description="Update a ui Div Seq item">
        <set field="invalidSeqNum" value="false"/>
        <set field="invalidSeqNumRange" value="false"/>
        <set field="sequenceValueGreaterThan" value="0" type="Long"/>
        <set field="sequenceNumValue" from-field="parameters.sequenceNum"/>
        <call-simple-method method-name="validateSequenceNumber" xml-resource="component://osafeadmin/script/com/osafeadmin/events/OsafeAdminValidationEvents.xml"/>
        <if>
            <condition>
                <or>
                    <if-compare operator="equals" value="true" field="invalidSeqNum" type="Boolean"/>
                    <if-compare operator="equals" value="true" field="invalidSeqNumRange" type="Boolean"/>
                </or>
            </condition>
            <then>
             <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="AttributeSequenceNumNotValidError"/>
             <string-to-list string="${tempErrorMessage}" message-field="sequenceNum" list="error_list"/>
            </then>
        </if>

        
        <if-empty field="parameters.caption">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankCaptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="caption" list="error_list"/>
        </if-empty>
        
        <if-not-empty field="parameters.type">
            <if>
                <condition>
                    <or>
	                    <if-compare operator="equals" value="ENTRY" field="parameters.type"/>
	                    <if-compare operator="equals" value="ENTRY_BOX" field="parameters.type"/>
                    </or>
                </condition>
                <then>
                    <set field="maxLengthValue" from-field="parameters.maxLength"/>
			        <set field="invalidMaxLength" value="false"/>
			        <if-not-empty field="maxLengthValue">
			            <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="maxLengthVaild">
			                <string value="${maxLengthValue}"></string>
			            </call-class-method>
			            <if-compare operator="equals" value="false" field="maxLengthVaild" type="Boolean">
			                <set field="invalidMaxLength" value="true"/>
			            <else>
			                <if-compare operator="less-equals" value="0" field="maxLengthValue" type="Long">
			                    <set field="invalidMaxLength" value="true"/>
			                </if-compare>
			            </else>
			            </if-compare>
			        <else>
			            <set field="invalidMaxLength" value="true"/>
			        </else>
			        </if-not-empty>
                    <if-compare field="invalidMaxLength" operator="equals" value="true">
                        <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="InvalidMaxLengthError"/>
            			<string-to-list string="${tempErrorMessage}" message-field="maxLength" list="error_list"/>
                    </if-compare>
                </then>
            </if>
        </if-not-empty>
        <if-not-empty field="parameters.type">
            <if>
                <condition>
                    <or>
	                    <if-compare operator="equals" value="RADIO_BUTTON" field="parameters.type"/>
	                    <if-compare operator="equals" value="CHECKBOX" field="parameters.type"/>
	                    <if-compare operator="equals" value="DROP_DOWN" field="parameters.type"/>
	                    <if-compare operator="equals" value="DROP_DOWN_MULTI" field="parameters.type"/>
                    </or>
                </condition>
                <then>
                    <if-empty field="parameters.valueList">
                        <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankValueListError"/>
            			<string-to-list string="${tempErrorMessage}" message-field="valueList" list="error_list"/>
                    </if-empty>
                </then>
            </if>
        </if-not-empty>
        
        <if-not-empty field="parameters.mandatory">
            <if-compare operator="equals" value="Y" field="parameters.mandatory">
                <if-empty field="parameters.reqMessage">
	                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankRequiredMessageError"/>
	            	<string-to-list string="${tempErrorMessage}" message-field="reqMessage" list="error_list"/>
                </if-empty>
            </if-compare>
        </if-not-empty>
        
        <check-errors/>
        <set-service-fields service-name="updateCustomPartyAttributeItemXml" map="parameters" to-map="updateCustomPartyAttributeItemXmlCtx"/>
        <call-service service-name="updateCustomPartyAttributeItemXml" in-map-name="updateCustomPartyAttributeItemXmlCtx"/>
        
        
        <set field="getPartyCustomAttributeListCtx" type="NewMap"/>
        <set field="getPartyCustomAttributeListCtx.useCache" value="false" type="String"/>
        <call-service service-name="getPartyCustomAttributeList" in-map-name="getPartyCustomAttributeListCtx">
            <result-to-field result-name="customPartyAttributeList" field="customPartyAttributeList"/>
        </call-service>
        
        <iterate entry="customPartyAttributeMap" list="customPartyAttributeList">
           <set field="customPartyAttributeSeqMap.${customPartyAttributeMap.AttrName}" value="${customPartyAttributeMap.SequenceNum}"/>
        </iterate>
        
        <set field="seqMultiple" value="10" type="Integer"/>
        <call-class-method method-name="setSequenceMapByMultiple" class-name="com.osafe.util.OsafeAdminUtil" ret-field="customPartyAttributeSeqMap">
            <field field="customPartyAttributeSeqMap" type="java.util.Map"/>
            <field field="seqMultiple" type="Integer"/>
        </call-class-method>
            
        <iterate entry="customPartyAttributeMap" list="customPartyAttributeList">
            <set field="seqNum" from-field="customPartyAttributeSeqMap.${customPartyAttributeMap.AttrName}"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.attrName" from-field="customPartyAttributeMap.AttrName"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.caption" from-field="customPartyAttributeMap.Caption"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.type" from-field="customPartyAttributeMap.Type"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.entryFormat" from-field="customPartyAttributeMap.EntryFormat"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.maxLength" from-field="customPartyAttributeMap.MaxLength"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.valueList" from-field="customPartyAttributeMap.ValueList"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.mandatory" from-field="customPartyAttributeMap.Mandatory"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.reqMessage" from-field="customPartyAttributeMap.ReqMessage"/>
            <set field="updateCustomPartyAttributeItemXmlCtx.sequenceNum" from-field="seqNum"/>
            <call-service service-name="updateCustomPartyAttributeItemXml" in-map-name="updateCustomPartyAttributeItemXmlCtx"/>
	    </iterate>
        
        <property-to-field resource="OSafeAdminUiLabels" property="CustomPartyAttributeSuccess" field="customPartyAttributeSuccessMessage"/>
        <string-to-list string="${customPartyAttributeSuccessMessage}" list="successMessageList"/>
    </simple-method>
    
    
    <simple-method method-name="updateCustomPartyAttributes" short-description="Updates Custom Party Attribute Sequence">
        <set field="invalidSeqNum" value="false"/>
        <set field="invalidSeqNumRange" value="false"/>
        <set field="sequenceValueGreaterThan" value="0" type="Long"/>
        <iterate-map key="sequenceNumKey" value="sequenceNumValue" map="parameters.sequenceNum">
            <if-not-empty field="sequenceNumValue">
                <call-simple-method method-name="validateSequenceNumber" xml-resource="component://osafeadmin/script/com/osafeadmin/events/OsafeAdminValidationEvents.xml"/>
            </if-not-empty>
        </iterate-map>
        <if>
            <condition>
                <or>
                    <if-compare operator="equals" value="true" field="invalidSeqNum" type="Boolean"/>
                    <if-compare operator="equals" value="true" field="invalidSeqNumRange" type="Boolean"/>
                </or>
            </condition>
            <then>
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="AttributeSequenceNumNotValidError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceNum" list="error_list"/>
            </then>
        </if>

        <check-errors/>

        <if-not-empty field="parameters.sequenceNum">
            <!-- sort the sequence map and make mutiple-->
            <set field="seqMultiple" value="10" type="Integer"/>
            <call-class-method method-name="setSequenceMapByMultiple" class-name="com.osafe.util.OsafeAdminUtil" ret-field="parameters.sequenceNum">
                <field field="parameters.sequenceNum" type="java.util.Map"/>
                <field field="seqMultiple" type="Integer"/>
            </call-class-method>
        </if-not-empty>
        <iterate-map key="entryKey" value="keyValue" map="parameters.attrName">
            <set field="updateCustomPartyAttributeItemXmlCtx.attrName" from-field="keyValue"/>
            <clear-field field="sequenceNumKey"/>
            <clear-field field="sequenceNumValue"/>
            <iterate-map key="sequenceNumKey" value="sequenceNumValue" map="parameters.sequenceNum">
                <if-compare-field field="entryKey" to-field="sequenceNumKey" operator="equals">
                    <if-empty field="sequenceNumValue">
                        <set field="sequenceNumValue" value="0" type="String"/>
                    </if-empty>
                    <set field="updateCustomPartyAttributeItemXmlCtx.sequenceNum" from-field="sequenceNumValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="captionKey"/>
            <clear-field field="captionValue"/>
            <iterate-map key="captionKey" value="captionValue" map="parameters.caption">
                <if-compare-field field="entryKey" to-field="captionKey" operator="equals">
                    <set field="updateCustomPartyAttributeItemXmlCtx.caption" from-field="captionValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="typeKey"/>
            <clear-field field="typeValue"/>
            <iterate-map key="typeKey" value="typeValue" map="parameters.type">
                <if-compare-field field="entryKey" to-field="typeKey" operator="equals">
                    <set field="updateCustomPartyAttributeItemXmlCtx.type" from-field="typeValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="requiredKey"/>
            <clear-field field="requiredValue"/>
            <iterate-map key="requiredKey" value="requiredValue" map="parameters.mandatory">
                <if-compare-field field="entryKey" to-field="requiredKey" operator="equals">
                    <set field="updateCustomPartyAttributeItemXmlCtx.mandatory" from-field="requiredValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="entryFormatKey"/>
            <clear-field field="entryFormatValue"/>
            <iterate-map key="entryFormatKey" value="entryFormatValue" map="parameters.entryFormat">
                <if-compare-field field="entryKey" to-field="entryFormatKey" operator="equals">
                    <set field="updateCustomPartyAttributeItemXmlCtx.entryFormat" from-field="entryFormatValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="maxLengthKey"/>
            <clear-field field="maxLengthValue"/>
            <iterate-map key="maxLengthKey" value="maxLengthValue" map="parameters.maxLength">
                <if-compare-field field="entryKey" to-field="maxLengthKey" operator="equals">
                    <set field="updateCustomPartyAttributeItemXmlCtx.maxLength" from-field="maxLengthValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="valueListKey"/>
            <clear-field field="valueListValue"/>
            <iterate-map key="valueListKey" value="valueListValue" map="parameters.valueList">
                <if-compare-field field="entryKey" to-field="valueListKey" operator="equals">
                    <set field="updateCustomPartyAttributeItemXmlCtx.valueList" from-field="valueListValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="reqMessageKey"/>
            <clear-field field="reqMessageValue"/>
            <iterate-map key="reqMessageKey" value="reqMessageValue" map="parameters.reqMessage">
                <if-compare-field field="entryKey" to-field="reqMessageKey" operator="equals">
                    <set field="updateCustomPartyAttributeItemXmlCtx.reqMessage" from-field="reqMessageValue"/>
                </if-compare-field>
            </iterate-map>
            
            <call-service service-name="updateCustomPartyAttributeItemXml" in-map-name="updateCustomPartyAttributeItemXmlCtx"/>
        </iterate-map>
        <property-to-field resource="OSafeAdminUiLabels" property="CustomPartyAttributeSuccess" field="customPartyAttributeSuccessMessage"/>
        <string-to-list string="${customPartyAttributeSuccessMessage}" list="successMessageList"/>
     </simple-method>

    <simple-method method-name="createGiftMessage" short-description="Create GiftMessage">
        <if-empty field="parameters.enumId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="GiftMessageIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        <else>
            <set field="IdLength" value="20" type="Integer"/>
            <set field="spaceReplacement" value=" " type="String"/>
            <set field="makeUpCase" value="true" type="Boolean"/>
            <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="enumId">
                <field field="parameters.enumId" type="String"/>
                <field field="IdLength" type="Integer"/>
                <field field="spaceReplacement" type="String"/>
                <field field="makeUpCase" type="boolean"/>
            </call-class-method>
            <if-empty field="enumId">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="GiftMessageIdLengthError"/>
                <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
            <else>
                <entity-one entity-name="Enumeration" value-field="existingEnum"/>
                <if-not-empty field="existingEnum">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="GiftMessageIdExistError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                    <else>
                        <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
                            <field field="parameters.enumId"/>
                        </call-class-method>
                        <if-compare field="isValidId" operator="equals" value="false">
                            <set field="errorKey" from-field="parameters.enumId"/>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
                        </if-compare>
                        <set field="parameters.enumId" from-field="enumId"/> 
                    </else>
                </if-not-empty>
            </else>
            </if-empty>
        </else>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="GiftMessageDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="GiftMessageSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
        <else>
            <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                <string value="${parameters.sequenceId}"></string>
            </call-class-method>
            <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="GiftMessageSequenceIdError"/>
                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                <else>
                    <if>
                        <condition>
                            <and>
                                <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                            </and>
                        </condition>
                        <then></then>
                        <else>
                            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="GiftMessageSequenceIdError"/>
                            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                        </else>
                    </if>
                </else>
            </if-compare>
        </else>
        </if-empty>
        <check-errors/>
        <make-value entity-name="Enumeration" value-field="newEntity"/>
        <set field="newEntity.enumId" from-field="parameters.enumId"/>
        <set-nonpk-fields map="parameters" value-field="newEntity"/>
        <create-value value-field="newEntity"/>
        <field-to-result field="parameters.enumId" result-name="enumId"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="GiftMessageSavedSuccess" field="giftMessageSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="${giftMessageSavedSuccess}" list="successMessageList"/>
    </simple-method>
    
    <simple-method method-name="updateGiftMessage" short-description="update GiftMessage">
        <if-empty field="parameters.enumId">
           <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="GiftMessageIdError"/>
           <string-to-list string="${tempErrorMessage}" message-field="enumId" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.description">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="GiftMessageDescriptionError"/>
            <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.sequenceId">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="GiftMessageSequenceIdError"/>
            <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
            <else>
                <call-class-method class-name="org.ofbiz.base.util.UtilValidate" method-name="isInteger" ret-field="sequenceNumVaild">
                    <string value="${parameters.sequenceId}"></string>
                </call-class-method>
                <if-compare operator="equals" value="false" field="sequenceNumVaild" type="Boolean">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="GiftMessageSequenceIdError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                    <else>
                        <if>
                            <condition>
                                <and>
                                    <if-compare operator="greater-equals" value="0" field="parameters.sequenceId" type="Long"/>
                                    <if-compare operator="less-equals" value="9999" field="parameters.sequenceId" type="Long"/>
                                </and>
                            </condition>
                            <then></then>
                            <else>
                                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="GiftMessageSequenceIdError"/>
                                <string-to-list string="${tempErrorMessage}" message-field="sequenceId" list="error_list"/>
                            </else>
                        </if>
                    </else>
                </if-compare>
            </else>
        </if-empty>
        <check-errors/>
        <set-service-fields service-name="updateEnumeration" map="parameters" to-map="updateEnumerationCtx"/>
        <call-service service-name="updateEnumeration" in-map-name="updateEnumerationCtx"/>
        <set field="argListNames[]" from-field="parameters.enumId"/>
        <property-to-field resource="OSafeAdminUiLabels" property="GiftMessageSavedSuccess" field="giftMessageSavedSuccess" arg-list-name="argListNames"/>
        <string-to-list string="${giftMessageSavedSuccess}" list="successMessageList"/>
    </simple-method>
    
    <simple-method method-name="deleteGiftMessage" short-description="Delete GiftMessage">
        <make-value entity-name="Enumeration" value-field="lookupKeyValue"/>
        <set-pk-fields map="parameters" value-field="lookupKeyValue"/>
        <find-by-primary-key entity-name="Enumeration" map="lookupKeyValue" value-field="lookedUpValue"/>
        <remove-value value-field="lookedUpValue"/>
        <property-to-field resource="OSafeAdminUiLabels" property="DeletedSuccess" field="deletedSuccessMessage"/>
        <string-to-list string="${deletedSuccessMessage}" list="successMessageList"/>
    </simple-method>

    <simple-method method-name="deleteProducts" short-description="Delete Products">

       <set-service-fields service-name="importRemoveEntityData" to-map="importRemoveEntityDataCtx" map="parameters"/>
       <call-service service-name="importRemoveEntityData" in-map-name="importRemoveEntityDataCtx" break-on-error="false">
           <result-to-field result-name="errorMessageList" field="errorMessageList"/>
           <result-to-field result-name="errorMessage" field="errorMessage"/>
       </call-service>

        <if>
            <condition>
                <or>
                <not><if-empty field="errorMessageList"/></not>
                <not><if-empty field="errorMessage"/></not>
                </or>
            </condition>
            <then>
                 <if-not-empty field="errorMessage">
                 <set field="argListNames[]" from-field="errorMessage"/>
                 <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="DeleteProductsError" arg-list-name="argListNames"/>
                 <string-to-list string="${tempErrorMessage}" list="error_list"/>
                 <else>
                     <if-not-empty field="errorMessageList">
                         <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="DeleteProductsError" arg-list-name="errorMessageList"/>
                         <string-to-list string="${tempErrorMessage}" list="error_list"/>
                     </if-not-empty>
                 </else>
                 </if-not-empty>
                 <clear-field field="errorMessage"/>
                 <clear-field field="errorMessageList"/>
             <check-errors/>
            </then>
        <else>
	        <property-to-field resource="OSafeAdminUiLabels" property="DeleteProductsSuccess" field="deleteProductsSuccess"/>
	        <string-to-list string="${deleteProductsSuccess}" list="successMessageList"/>
        </else>
        </if>
    </simple-method>

    <simple-method method-name="updateBigfishParameter" short-description="update Bigfish Parameter">

        <if-not-empty field="parameters.mode">
            <if-compare field="parameters.mode" operator="equals" value="add">
                <if-empty field="parameters.key">
                    <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankBigfishParameterKeyError"/>
                    <string-to-list string="${tempErrorMessage}" message-field="style" list="error_list"/>
                    <else>
                        <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="isValidId" ret-field="isValidId">
                                <field field="parameters.key"/>
                        </call-class-method>
                        <if-compare field="isValidId" operator="equals" value="false">
                                <set field="errorKey" from-field="parameters.key"/>
                                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidIdError"/>
                                <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
                                <else>
                                    <set field="spaceReplacement" value=" " type="String"/>
                                    <set field="makeUpCase" value="false" type="Boolean"/>
                                    <call-class-method class-name="com.osafe.util.OsafeAdminUtil"  method-name="makeValidId" ret-field="parameters.key">
                                        <field field="parameters.key" type="String"/>
                                        <string value="${spaceReplacement}"/>
                                        <field field="makeUpCase" type="boolean"/>
                                    </call-class-method>
                                    <if-empty field="parameters.key">
                                        <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidKeyError"/>
                                        <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
                                        <else>
                                            <call-class-method class-name="org.ofbiz.base.util.UtilProperties" method-name="getPropertyValue" ret-field="ecommerceConfigPath">
                                                <string value="osafeAdmin.properties"/>
                                                <string value="ecommerce-config-path"/>
                                            </call-class-method>
                                            <set field="XmlFilePath" value="${groovy: org.ofbiz.base.util.string.FlexibleStringExpander.expandString(ecommerceConfigPath, context)}" type="String"/>
							                <create-object class-name="java.io.File" field="XmlFile">
							                    <field field="XmlFilePath" type="String"/>
							                    <field field="parameters.parameterFileName" type="String"/>
							                </create-object>
							                <call-object-method method-name="getAbsolutePath" obj-field="XmlFile" ret-field="XmlFilePath"/>
                                            <call-class-method class-name="com.osafe.services.OsafeManageXml" method-name="findByKeyFromXmlFile" ret-field="bigfishParameterEntry">
                                                <field field="XmlFilePath" type="String"/>
                                                <string value="key"/>
                                                <field field="parameters.key" type="String"/>
                                            </call-class-method>
                                            <if-not-empty field="bigfishParameterEntry">
                                                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BigfishParameterExistError"/>
                                                <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
                                            </if-not-empty>
                                        </else>
                                    </if-empty>
                                </else>
                        </if-compare>
                    </else>
                </if-empty>
            </if-compare>
        </if-not-empty>

        <iterate-map key="descriptionKey" value="descriptionValue" map="parameters.descriptions">
            <if-empty field="descriptionValue">
                <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="ValidDescriptionError"/>
                <string-to-list string="${tempErrorMessage}" message-field="description" list="error_list"/>
            </if-empty>
        </iterate-map>

        <field-to-result field="parameters.showDetail" result-name="showDetail"/>
        <field-to-result field="parameters.parameterFileName" result-name="parameterFileName"/>

        <check-errors/>

        <iterate-map key="entryKey" value="keyValue" map="parameters.keys">
            <set field="updateBigfishParameterXmlCtx.parameterFileName" from-field="parameters.parameterFileName"/>
            <set field="addBigfishParameterXmlCtx.parameterFileName" from-field="parameters.parameterFileName"/>
            <set field="updateBigfishParameterXmlCtx.key" from-field="keyValue"/>
            <clear-field field="descriptionKey"/>
            <clear-field field="descriptionValue"/>
            <iterate-map key="descriptionKey" value="descriptionValue" map="parameters.descriptions">
                <if-compare-field field="entryKey" to-field="descriptionKey" operator="equals">
                    <if-not-empty field="parameters.mode">
                        <if-compare field="parameters.mode" operator="equals" value="add">
                            <if-not-empty field="parameters.key">
                                <if-compare-field field="parameters.key" operator="equals" to-field="keyValue">
                                    <set field="addBigfishParameterXmlCtx.description" from-field="descriptionValue"/>
                                </if-compare-field>
                            </if-not-empty>
                        </if-compare>
                    </if-not-empty>
                    <set field="updateBigfishParameterXmlCtx.description" from-field="descriptionValue"/>
                </if-compare-field>
            </iterate-map>
            <clear-field field="valueKey"/>
            <clear-field field="value"/>
            <iterate-map key="valueKey" value="value" map="parameters.values">
                <if-compare-field field="entryKey" to-field="valueKey" operator="equals">
                    <if-not-empty field="parameters.mode">
                        <if-compare field="parameters.mode" operator="equals" value="add">
                            <if-not-empty field="parameters.key">
                                <if-compare-field field="parameters.key" operator="equals" to-field="keyValue">
                                    <set field="addBigfishParameterXmlCtx.value" from-field="value"/>
                                </if-compare-field>
                            </if-not-empty>
                        </if-compare>
                    </if-not-empty>
                    <set field="updateBigfishParameterXmlCtx.value" from-field="value"/>
                </if-compare-field>
            </iterate-map>
            <if-not-empty field="parameters.mode">
                <if-compare field="parameters.mode" operator="equals" value="add">
                    <if-not-empty field="parameters.key">
                        <if-compare-field field="parameters.key" operator="equals" to-field="keyValue">
                            <set field="addBigfishParameterXmlCtx.key" from-field="parameters.key"/>
                            <call-service service-name="addBigfishParameterXml" in-map-name="addBigfishParameterXmlCtx"/>
                        </if-compare-field>
                    </if-not-empty>
                </if-compare>
            </if-not-empty>
            <call-service service-name="updateBigfishParameterXml" in-map-name="updateBigfishParameterXmlCtx"/>
        </iterate-map>

        <if-not-empty field="parameters.key">
            <set field="argListNames[]" from-field="parameters.key"/>
            <property-to-field resource="OSafeAdminUiLabels" property="UpdateBigfishParameterDetailSuccess" field="updateBigfishParameterDetailSuccess" arg-list-name="argListNames"/>
            <string-to-list string="${updateBigfishParameterDetailSuccess}" list="successMessageList"/>
        <else>
            <set field="argListNames[]" from-field="parameters.parameterFileName"/>
            <property-to-field resource="OSafeAdminUiLabels" property="UpdateBigfishParameterSuccess" field="updateBigfishParameterSuccess" arg-list-name="argListNames"/>
            <string-to-list string="${updateBigfishParameterSuccess}" list="successMessageList"/>
        </else>
        </if-not-empty>
     </simple-method>
   
    <simple-method method-name="deleteBigfishParameter" short-description="delete Bigfish Parameter from xml file">

        <if-empty field="parameters.key">
            <property-to-field field="tempErrorMessage" resource="OSafeAdminUiLabels" property="BlankKeyError"/>
            <string-to-list string="${tempErrorMessage}" message-field="key" list="error_list"/>
        </if-empty>

        <field-to-result field="parameters.showDetail" result-name="showDetail"/>
        <field-to-result field="parameters.parameterFileName" result-name="parameterFileName"/>

        <check-errors/>
        
        <set-service-fields service-name="deleteBigfishParameterXml" map="parameters" to-map="deleteBigfishParameterXmlCtx"/>
        <call-service service-name="deleteBigfishParameterXml" in-map-name="deleteBigfishParameterXmlCtx"/>
        <property-to-field resource="OSafeAdminUiLabels" property="DeletedSuccess" field="deletedSuccessMessage"/>
        <string-to-list string="${deletedSuccessMessage}" list="successMessageList"/>
    </simple-method>
    
    <simple-method method-name="clearAllCache" short-description="Clears All Cache">
        <call-class-method class-name="org.ofbiz.base.util.cache.UtilCache"  method-name="clearAllCaches"/>
    </simple-method>

</simple-methods>
